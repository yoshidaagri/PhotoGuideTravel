# AWS ã‚µãƒ¼ãƒãƒ¬ã‚¹é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ å®Œå…¨ã‚¬ã‚¤ãƒ‰
## è¦³å…‰ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ - æœ­å¹Œç‰¹åŒ–AIè¦³å…‰ã‚¬ã‚¤ãƒ‰ï¼ˆå€‹äººé–‹ç™ºãƒ»åç›ŠåŒ–ï¼‰

# Claude Code Configuration

## Claude Code ã®åŸºæœ¬åŸå‰‡
1. **äººé–“ã®æŒ‡ç¤ºå„ªå…ˆ**: äººé–“ã®æŒ‡ç¤ºã¯å¸¸ã«æœ€å„ªå…ˆã§å¾“ã†ã€‚æ˜ç¢ºãªæŒ‡ç¤ºãŒã‚ã‚‹å ´åˆã¯ã€ãã®é€šã‚Šã«å®Ÿè¡Œã™ã‚‹
2. **èƒ½å‹•çš„ãªç¢ºèª**: æ›–æ˜§ãªæŒ‡ç¤ºã‚„è¤‡æ•°ã®è§£é‡ˆãŒå¯èƒ½ãªå ´åˆã¯ã€å¿…ãšäººé–“ã«ç¢ºèªã‚’æ±‚ã‚ã‚‹
3. **å®Œå…¨æ€§ã®è¿½æ±‚**: æŒ‡ç¤ºã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã¯é€”ä¸­ã§æ­¢ã‚ã‚‹ã“ã¨ãªãã€å®Œå…¨ã«å®Œäº†ã™ã‚‹ã¾ã§å®Ÿè¡Œã—ç¶šã‘ã‚‹

## ğŸ“š å­¦ç¿’é‡è¦–é–‹ç™ºæ–¹é‡

### æ®µéšçš„AWSå­¦ç¿’ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
**é‡è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯AWSã‚µãƒ¼ãƒ“ã‚¹å…¨èˆ¬ã®å°‚é–€å®¶ã§ã¯ãªã„ãŸã‚ã€å®Ÿè£…ã¨å­¦ç¿’ã‚’ä¸¦è¡Œã—ã¦é€²ã‚ã‚‹

#### **å­¦ç¿’ãƒ»å®Ÿè£…ã®åŸºæœ¬æ–¹é‡**
```yaml
å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—:
  1. å¿…è¦æœ€å°é™ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰é–‹å§‹
  2. ä¸€ã¤ãšã¤ç†è§£ãƒ»å®Ÿè£…ãƒ»æ¤œè¨¼
  3. å‹•ä½œç¢ºèªã—ã¦ã‹ã‚‰æ¬¡ã®ã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ 
  4. å„æ®µéšã§çŸ¥è­˜ã®å®šç€ã‚’ç¢ºèª

å®Ÿè£…é †åº:
  Phase1-3: åŸºæœ¬ç’°å¢ƒï¼ˆAWS CLI, GitHubç­‰ï¼‰
  Phase4-5: ã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆLambda, DynamoDB, S3ï¼‰
  Phase6-7: é‹ç”¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆCloudWatch, API Gatewayï¼‰
  Phase8-9: æœ€é©åŒ–ãƒ»ç›£è¦–
```

### Claude Code ã®å­¦ç¿’ã‚µãƒãƒ¼ãƒˆå½¹å‰²

#### **AWSçŸ¥è­˜ã‚®ãƒ£ãƒƒãƒ—å¯¾å¿œ**
```yaml
å¿…é ˆã‚µãƒãƒ¼ãƒˆå†…å®¹:
  - å„AWSã‚µãƒ¼ãƒ“ã‚¹ã®åŸºæœ¬æ¦‚å¿µèª¬æ˜
  - è¨­å®šæ‰‹é †ã®è©³ç´°ã‚¬ã‚¤ãƒ‰
  - ã‚¨ãƒ©ãƒ¼å¯¾å¿œãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  - ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®è§£èª¬
  - ã‚³ã‚¹ãƒˆå½±éŸ¿ã®äº‹å‰èª¬æ˜

èª¬æ˜ãƒ¬ãƒ™ãƒ«:
  - åˆå¿ƒè€…å‘ã‘ï¼šå°‚é–€ç”¨èªã®è§£èª¬ä»˜ã
  - å®Ÿè·µçš„ï¼šå®Ÿéš›ã®ã‚³ãƒãƒ³ãƒ‰ãƒ»è¨­å®šä¾‹
  - æ®µéšçš„ï¼šè¤‡é›‘ãªè¨­å®šã¯åˆ†å‰²èª¬æ˜
```

#### **å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ**
```yaml
Phase 1 (é–‹ç™ºç’°å¢ƒ):
  å­¦ç¿’å†…å®¹: AWS CLIåŸºæœ¬æ“ä½œã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
  ç¿’å¾—ç›®æ¨™: AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®åŸºæœ¬ç†è§£

Phase 2 (AWSç’°å¢ƒ):
  å­¦ç¿’å†…å®¹: IAMã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸºæœ¬
  ç¿’å¾—ç›®æ¨™: AWSæ¨©é™ç®¡ç†ã®ç†è§£

Phase 4 (ã‚µãƒ¼ãƒãƒ¬ã‚¹åŸºç›¤):
  å­¦ç¿’å†…å®¹: Lambdaã€DynamoDBã€S3ã®åŸºæœ¬æ¦‚å¿µ
  ç¿’å¾—ç›®æ¨™: ã‚µãƒ¼ãƒãƒ¬ã‚¹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£

Phase 6 (CI/CD):
  å­¦ç¿’å†…å®¹: CloudFormationã€ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–
  ç¿’å¾—ç›®æ¨™: ã‚¤ãƒ³ãƒ•ãƒ© ã‚³ãƒ¼ãƒ‰ç®¡ç†

Phase 7 (ç›£è¦–):
  å­¦ç¿’å†…å®¹: CloudWatchã€ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
  ç¿’å¾—ç›®æ¨™: é‹ç”¨ç›£è¦–ã®åŸºæœ¬
```

### å­¦ç¿’åŠ¹ç‡åŒ–ã®ãƒ«ãƒ¼ãƒ«

#### **Claudeã®èª¬æ˜ç¾©å‹™**
```yaml
æ–°ã—ã„AWSã‚µãƒ¼ãƒ“ã‚¹å°å…¥æ™‚:
  1. ã‚µãƒ¼ãƒ“ã‚¹æ¦‚è¦ã®ç°¡æ½”èª¬æ˜ï¼ˆ1-2è¡Œï¼‰
  2. PhotoGuideTravelã§ã®å½¹å‰²èª¬æ˜
  3. è¨­å®šæ™‚ã®æ³¨æ„ç‚¹ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
  4. ã‚³ã‚¹ãƒˆå½±éŸ¿åº¦ã®æ˜ç¤º
  5. å®Ÿéš›ã®è¨­å®šæ‰‹é †ï¼ˆã‚³ãƒãƒ³ãƒ‰å«ã‚€ï¼‰

ä¾‹ï¼š
"DynamoDBã‚’è¨­å®šã—ã¾ã™ã€‚
DynamoDBã¯AWSã®é«˜é€ŸNoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚
PhotoGuideTravelã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨è§£æçµæœã‚’ä¿å­˜ã—ã¾ã™ã€‚
Pay-per-requestãƒ¢ãƒ¼ãƒ‰ãªã‚‰æ°¸ç¶šç„¡æ–™æ å†…ã§é‹ç”¨å¯èƒ½ã§ã™ã€‚
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã‚’é–‹å§‹ã—ã¾ã™..."
```

#### **æ®µéšçš„ç†è§£ã®ç¢ºä¿**
```yaml
å®Ÿè£…å‰ã®ç¢ºèªäº‹é …:
  - è¨­å®šå†…å®¹ã®ç†è§£åº¦ç¢ºèª
  - æœŸå¾…ã•ã‚Œã‚‹çµæœã®èª¬æ˜
  - å¤±æ•—æ™‚ã®å¯¾å‡¦æ–¹æ³•èª¬æ˜
  - æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®å½±éŸ¿èª¬æ˜

å®Ÿè£…å¾Œã®æŒ¯ã‚Šè¿”ã‚Š:
  - è¨­å®šçµæœã®ç¢ºèªæ–¹æ³•èª¬æ˜
  - æœŸå¾…é€šã‚Šã®å‹•ä½œç¢ºèª
  - å­¦ã‚“ã æ¦‚å¿µã®æ•´ç†
  - æ¬¡å›å¿œç”¨æ™‚ã®ãƒã‚¤ãƒ³ãƒˆèª¬æ˜
```

### å­¦ç¿’è¨˜éŒ²ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

#### **çŸ¥è­˜è“„ç©æ–¹é‡**
```yaml
å­¦ç¿’æˆæœã®è¨˜éŒ²:
  - å„AWSã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šæ‰‹é †ãƒ¡ãƒ¢
  - ç™ºç”Ÿã—ãŸå•é¡Œã¨è§£æ±ºæ–¹æ³•è¨˜éŒ²
  - ç†è§£åº¦ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆè¨˜éŒ²
  - ä»Šå¾Œã®æ”¹å–„ãƒã‚¤ãƒ³ãƒˆè¨˜éŒ²

å‚è€ƒè³‡æ–™æ´»ç”¨:
  - AWSå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§
  - ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹äº‹ä¾‹å‚ç…§
  - ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æƒ…å ±æ´»ç”¨
  - gas_sampleã¨ã®æ¯”è¼ƒå­¦ç¿’
```

### å®‰å…¨ãªå­¦ç¿’ç’°å¢ƒã®æä¾›

#### **è©¦è¡ŒéŒ¯èª¤ã®å®‰å…¨æ€§ç¢ºä¿**
```yaml
å­¦ç¿’æ™‚ã®å®‰å…¨å¯¾ç­–:
  - devç’°å¢ƒã§ã®æ¤œè¨¼å„ªå…ˆ
  - æœ¬ç•ªç’°å¢ƒã¸ã®å½±éŸ¿å›é¿
  - ã‚³ã‚¹ãƒˆä¸Šé™è¨­å®šã®å¾¹åº•
  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æº–å‚™
  - ã‚¨ãƒ©ãƒ¼æ™‚ã®è¿…é€Ÿå¾©æ—§æ‰‹é †
```

## ğŸ’° ã‚³ã‚¹ãƒˆç®¡ç†ãƒ»ç„¡æ–™æ æ´»ç”¨æ–¹é‡
**é‡è¦**: åˆæœŸæ®µéšã§ã¯è³‡é‡‘ä¸è¶³ã‚’é¿ã‘ã‚‹ãŸã‚ã€AWSç„¡æ–™æ ã‚’æœ€å¤§é™æ´»ç”¨ã—ã€ã‚³ã‚¹ãƒˆã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹

### å¿…é ˆãƒ«ãƒ¼ãƒ«
- **æœ‰æ–™ã‚µãƒ¼ãƒ“ã‚¹ä½¿ç”¨æ™‚ã¯å¿…ãšäº‹å‰ã«äººé–“ã®è¨±å¯ã‚’å¾—ã‚‹ã“ã¨**
- **ç„¡æ–™æ ã‚’è¶…ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹æ“ä½œã¯äº‹å‰ç¢ºèªå¿…é ˆ**
- **æœˆæ¬¡ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚’æç¤ºã—ã¦ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã“ã¨**

### AWSç„¡æ–™æ æœ€å¤§æ´»ç”¨æˆ¦ç•¥
```yaml
Lambda:
  - æœˆé–“100ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - æœˆé–“40ä¸‡GBç§’ï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - é–‹ç™ºåˆæœŸã¯ååˆ†ã«ã‚«ãƒãƒ¼å¯èƒ½

DynamoDB:
  - 25GB ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - æœˆé–“2.5å„„ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - Pay-per-requestãƒ¢ãƒ¼ãƒ‰æ¨å¥¨

S3:
  - 5GB æ¨™æº–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ12ãƒ¶æœˆç„¡æ–™ï¼‰
  - æœˆé–“2ä¸‡ä»¶ GETãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆ12ãƒ¶æœˆç„¡æ–™ï¼‰
  - ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«è¨­å®šã§å®¹é‡åˆ¶é™

API Gateway:
  - æœˆé–“100ä¸‡APIã‚³ãƒ¼ãƒ«ï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæ®µéšã§ã¯ååˆ†

CloudFront:
  - æœˆé–“1TBè»¢é€ï¼ˆ12ãƒ¶æœˆç„¡æ–™ï¼‰
  - æœˆé–“1000ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆ12ãƒ¶æœˆç„¡æ–™ï¼‰

Cognito:
  - æœˆé–“5ä¸‡MAUï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - åˆæœŸãƒ¦ãƒ¼ã‚¶ãƒ¼ç²å¾—æ®µéšã§ã¯ååˆ†
```

### ã‚³ã‚¹ãƒˆç›£è¦–å¿…é ˆé …ç›®
- **AWS Cost Explorer**: é€±æ¬¡ãƒã‚§ãƒƒã‚¯
- **Billing Alerts**: $10, $50, $100ã§æ®µéšã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
- **ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ç›£è¦–**: ç„¡æ–™æ æ®‹é‡ã®å®šæœŸç¢ºèª

## ğŸš¨ é«˜ã‚³ã‚¹ãƒˆãƒªã‚¹ã‚¯é …ç›®ã¨å¯¾ç­–

### æœ€é‡è¦ãƒªã‚¹ã‚¯é …ç›®

#### **1. Lambdaç”»åƒè§£æé–¢æ•°ï¼ˆæœ€å¤§ãƒªã‚¹ã‚¯ï¼‰**
```yaml
è¨­å®š: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ30ç§’ã€ãƒ¡ãƒ¢ãƒª1024MB
æœˆæ¬¡ã‚³ã‚¹ãƒˆæƒ³å®š:
  - æœˆé–“1,000å›å®Ÿè¡Œ: ç„¡æ–™æ å†… âœ…
  - æœˆé–“15,000å›å®Ÿè¡Œ: ç´„$0.8è¶…é âš ï¸
  - æœˆé–“50,000å›å®Ÿè¡Œ: ç´„$18è¶…é âŒ

ç·Šæ€¥å¯¾ç­–:
  - Reserved Concurrency: 5ã«åˆ¶é™
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 15ç§’ã«çŸ­ç¸®ï¼ˆ30ç§’â†’15ç§’ï¼‰
  - ãƒ¡ãƒ¢ãƒª: 512MBã«å‰Šæ¸›ï¼ˆ1024MBâ†’512MBï¼‰
  - 1ãƒ¦ãƒ¼ã‚¶ãƒ¼: 10å›/æ—¥åˆ¶é™
```

#### **2. CloudFrontï¼ˆ12ãƒ¶æœˆå¾Œæœ‰æ–™åŒ–ï¼‰**
```yaml
ç„¡æ–™æœŸé–“çµ‚äº†ãƒªã‚¹ã‚¯:
  - æœˆé–“100GBé…ä¿¡: $11.4/æœˆ âŒ
  - æœˆé–“500ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: $3.75/æœˆ âŒ

å¯¾ç­–:
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœŸé–“: 24æ™‚é–“è¨­å®š
  - åœ°ç†çš„åˆ¶é™: æ—¥æœ¬ã®ã¿
  - ç”»åƒåœ§ç¸®: WebPå½¢å¼æ¡ç”¨
```

#### **3. S3ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ12ãƒ¶æœˆå¾Œæœ‰æ–™åŒ–ï¼‰**
```yaml
å®¹é‡åˆ¶é™å¿…é ˆ:
  - 10,000æšÃ—2MB = 20GB â†’ $0.5/æœˆ âœ…
  - 100,000æšÃ—2MB = 200GB â†’ $5/æœˆ âŒ

å¯¾ç­–:
  - è‡ªå‹•å‰Šé™¤: 30æ—¥ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
  - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åˆ¶é™: 2MB/ç”»åƒ
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¶é™: 10æš/æ—¥
```

### éš ã‚ŒãŸã‚³ã‚¹ãƒˆãƒªã‚¹ã‚¯ï¼ˆè¨˜è¼‰æ¼ã‚Œæ³¨æ„é …ç›®ï¼‰

#### **4. NAT Gatewayï¼ˆVPCä½¿ç”¨æ™‚ï¼‰**
```yaml
è¶…é«˜é¡ãƒªã‚¹ã‚¯: $37.44/æœˆ âŒâŒâŒ
å›é¿æ–¹æ³•: Lambda ã‚’VPCå¤–ã§å®Ÿè¡Œï¼ˆå¿…é ˆï¼‰
```

#### **5. Application Load Balancer**
```yaml
é«˜é¡ãƒªã‚¹ã‚¯: $18.14/æœˆ âŒ
å›é¿æ–¹æ³•: API Gateway ã®ã¿ä½¿ç”¨
```

#### **6. Route53 ãƒ›ã‚¹ãƒˆã‚¾ãƒ¼ãƒ³**
```yaml
ä¸­é¡ãƒªã‚¹ã‚¯: $0.5/æœˆ/ãƒ‰ãƒ¡ã‚¤ãƒ³ âŒ
å›é¿æ–¹æ³•: åˆæœŸã¯API Gateway ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆURLä½¿ç”¨
```

#### **7. CloudWatch Logs**
```yaml
ä¸­é¡ãƒªã‚¹ã‚¯: 5GBè¶…éæ™‚ $0.57/GB
å¯¾ç­–:
  - ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«: ERROR ã®ã¿
  - ä¿æŒæœŸé–“: 7æ—¥é–“
  - è©³ç´°ãƒ­ã‚°ç„¡åŠ¹åŒ–
```

### ç·Šæ€¥ã‚³ã‚¹ãƒˆåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 

#### **ãƒã‚¤ãƒ©ãƒ«æ‹¡æ•£æ™‚ã®ç·Šæ€¥åœæ­¢**
```python
# ç·Šæ€¥ã‚³ã‚¹ãƒˆä¸Šé™è¨­å®š
EMERGENCY_COST_LIMIT = 25  # $25/æœˆä¸Šé™

ç·Šæ€¥å¯¾å¿œãƒ•ãƒ­ãƒ¼:
$10é”æˆæ™‚: è­¦å‘Šãƒ¡ãƒ¼ãƒ« + ä½¿ç”¨é‡ç›£è¦–å¼·åŒ–
$20é”æˆæ™‚: æ©Ÿèƒ½åˆ¶é™é–‹å§‹ï¼ˆç”»åƒè§£æ1æ—¥1å›/ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
$25é”æˆæ™‚: å…¨ã‚µãƒ¼ãƒ“ã‚¹ä¸€æ™‚åœæ­¢ + å³åº§ã«é€£çµ¡
```

#### **æ¨å¥¨å®‰å…¨é‹ç”¨è¨­å®š**
```yaml
Lambdaåˆ¶é™:
  - Reserved Concurrency: 5ï¼ˆåŒæ™‚å®Ÿè¡Œå³æ ¼åˆ¶é™ï¼‰
  - ãƒ¡ãƒ¢ãƒª: 512MB
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 15ç§’

S3åˆ¶é™:
  - ç”»åƒã‚µã‚¤ã‚ºä¸Šé™: 2MB
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸Šé™: 10æš/æ—¥
  - è‡ªå‹•å‰Šé™¤: 30æ—¥

APIåˆ¶é™:
  - ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 10req/åˆ†/ãƒ¦ãƒ¼ã‚¶ãƒ¼
  - ç”»åƒè§£æ: 5å›/æ—¥/ãƒ¦ãƒ¼ã‚¶ãƒ¼
```

### æœˆæ¬¡ã‚³ã‚¹ãƒˆæ¦‚ç®—

#### **å®‰å…¨é‹ç”¨ï¼ˆæ¨å¥¨ï¼‰**
```yaml
æœˆé–“åˆ©ç”¨æƒ³å®š: 1,000ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€10,000è§£æ/æœˆ
1å¹´ç›®: $0-2/æœˆ
2å¹´ç›®: $3-8/æœˆï¼ˆCloudFrontãƒ»S3æœ‰æ–™åŒ–ï¼‰
```

#### **å±é™ºé‹ç”¨**
```yaml
æœˆé–“åˆ©ç”¨æƒ³å®š: 10,000ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€100,000è§£æ/æœˆ
æƒ³å®šã‚³ã‚¹ãƒˆ: $50-200/æœˆ âŒâŒâŒ
```

### å¿…é ˆå®Ÿè£…: ã‚³ã‚¹ãƒˆç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆ
```yaml
CloudWatch Billing Alerts:
  - $5: æ³¨æ„ãƒ¬ãƒ™ãƒ«
  - $10: è­¦å‘Šãƒ¬ãƒ™ãƒ«  
  - $20: å±é™ºãƒ¬ãƒ™ãƒ«
  - $25: ç·Šæ€¥åœæ­¢ãƒ¬ãƒ™ãƒ«
```

## ğŸš¨ ç·Šæ€¥åœæ­¢ï¼šéå¸¸æ‰‹æ®µ

### ğŸ¥‡ æœ€å„ªå…ˆï¼šLambdaç·Šæ€¥åœæ­¢ï¼ˆ1ã‚³ãƒãƒ³ãƒ‰ï¼‰
```bash
# æœ€å¤§ã‚³ã‚¹ãƒˆè¦å› ã‚’å³åº§ã«åœæ­¢ï¼ˆæœ€é‡è¦ï¼‰
aws lambda put-function-concurrency \
  --function-name ai-tourism-poc-dev-imageAnalysis \
  --reserved-concurrent-executions 0 \
  --profile ai-tourism-poc

# å¾©æ—§ã‚³ãƒãƒ³ãƒ‰
aws lambda delete-function-concurrency \
  --function-name ai-tourism-poc-dev-imageAnalysis \
  --profile ai-tourism-poc
```

### ğŸ“± ã‚¹ãƒãƒ›ã‹ã‚‰ã®ç·Šæ€¥åœæ­¢
```bash
# AWS Mobile App ã¾ãŸã¯ ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å®Ÿè¡Œå¯èƒ½
# è¨­å®š â†’ Lambda â†’ ai-tourism-poc-dev-imageAnalysis â†’ Concurrency â†’ 0

# ã¾ãŸã¯ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ç™»éŒ²ç”¨URLï¼ˆç·Šæ€¥åœæ­¢Lambdaé–¢æ•°ï¼‰
https://[ç·Šæ€¥åœæ­¢API-URL]/emergency-shutdown?key=secret123
```

### âš¡ 3æ®µéšè‡ªå‹•åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
```python
# Stage 1: $10é”æˆæ™‚ï¼ˆè‡ªå‹•åˆ¶é™ï¼‰
def auto_limit_stage1():
    # ç”»åƒè§£æ: 1æ—¥1å›/ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¶é™
    # åŒæ™‚å®Ÿè¡Œæ•°: 5 â†’ 3ã«å‰Šæ¸›
    # ã‚¢ãƒ©ãƒ¼ãƒˆé€ä¿¡

# Stage 2: $20é”æˆæ™‚ï¼ˆåŠåœæ­¢ï¼‰
def auto_limit_stage2():
    # ç”»åƒè§£æLambda: å®Œå…¨åœæ­¢ï¼ˆåŒæ™‚å®Ÿè¡Œæ•°0ï¼‰
    # API: 503 Service Unavailable è¿”å´
    # ç·Šæ€¥ãƒ¡ãƒ¼ãƒ«é€šçŸ¥

# Stage 3: $25é”æˆæ™‚ï¼ˆå®Œå…¨åœæ­¢ï¼‰
def emergency_shutdown():
    # å…¨Lambdaé–¢æ•°åœæ­¢
    # API Gateway Stageå‰Šé™¤
    # S3 PUTæ“ä½œåœæ­¢
```

### ğŸ›¡ï¸ ãã®ä»–ã®éå¸¸æ‰‹æ®µ

#### **API Gatewayå®Œå…¨é®æ–­**
```bash
# å…¨APIã‚¢ã‚¯ã‚»ã‚¹é®æ–­
aws apigateway delete-stage \
  --rest-api-id [API-ID] \
  --stage-name dev \
  --profile ai-tourism-poc
```

#### **IAMæ¨©é™ä¸€æ™‚å‰Šé™¤**
```bash
# Lambdaå®Ÿè¡Œæ¨©é™å‰Šé™¤ï¼ˆæœ€çµ‚æ‰‹æ®µï¼‰
aws iam detach-role-policy \
  --role-name ai-tourism-poc-lambda-role \
  --policy-arn arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole \
  --profile ai-tourism-poc
```

#### **S3ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åœæ­¢**
```bash
# S3ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼ã§å…¨æ›¸ãè¾¼ã¿æ‹’å¦
aws s3api put-bucket-policy \
  --bucket photoguide-user-images-dev \
  --policy '{"Statement":[{"Effect":"Deny","Principal":"*","Action":"s3:PutObject"}]}' \
  --profile ai-tourism-poc
```

### ğŸ“‹ ç·Šæ€¥æ™‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
```yaml
ã‚³ã‚¹ãƒˆçˆ†ç™ºæ™‚ã®å¯¾å¿œæ‰‹é †ï¼ˆ5åˆ†ä»¥å†…ï¼‰:
  1. LambdaåŒæ™‚å®Ÿè¡Œæ•°ã‚’0ã«è¨­å®š â† æœ€å„ªå…ˆ
  2. CloudWatch Billingç¢ºèª
  3. API Gateway ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ç¢ºèª
  4. å¿…è¦ã«å¿œã˜ã¦API Stageå‰Šé™¤
  5. ãƒãƒ¼ãƒ ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã¸å ±å‘Š

ç·Šæ€¥é€£çµ¡å…ˆ:
  - AWS ã‚µãƒãƒ¼ãƒˆ: [å¿…è¦æ™‚è¨˜å…¥]
  - é–‹ç™ºãƒãƒ¼ãƒ è²¬ä»»è€…: [å¿…è¦æ™‚è¨˜å…¥]
  - çµŒå–¶é™£: [å¿…è¦æ™‚è¨˜å…¥]
```

### ğŸ”§ ç·Šæ€¥åœæ­¢ç”¨Lambdaé–¢æ•°ï¼ˆäº‹å‰ãƒ‡ãƒ—ãƒ­ã‚¤æ¨å¥¨ï¼‰
```python
# functions/emergency-shutdown/handler.py
import boto3
import json

def main(event, context):
    """ç·Šæ€¥åœæ­¢ç”¨Lambdaé–¢æ•°"""
    
    # èªè¨¼ã‚­ãƒ¼ãƒã‚§ãƒƒã‚¯
    secret_key = event.get('queryStringParameters', {}).get('key', '')
    if secret_key != 'emergency123':  # äº‹å‰ã«å®‰å…¨ãªã‚­ãƒ¼ã‚’è¨­å®š
        return {'statusCode': 403, 'body': 'Forbidden'}
    
    lambda_client = boto3.client('lambda')
    
    try:
        # ç”»åƒè§£æLambdaåœæ­¢
        lambda_client.put_function_concurrency(
            FunctionName='ai-tourism-poc-dev-imageAnalysis',
            ReservedConcurrentExecutions=0
        )
        
        # ãã®ä»–é«˜ã‚³ã‚¹ãƒˆæ©Ÿèƒ½åœæ­¢
        # ... è¿½åŠ åœæ­¢å‡¦ç†
        
        return {
            'statusCode': 200,
            'body': json.dumps({
                'message': 'ğŸš¨ EMERGENCY SHUTDOWN ACTIVATED',
                'timestamp': str(datetime.utcnow()),
                'actions': [
                    'Lambda imageAnalysis: STOPPED',
                    'Cost escalation: PREVENTED'
                ]
            })
        }
        
    except Exception as e:
        return {
            'statusCode': 500,
            'body': json.dumps({'error': str(e)})
        }
```

**é‡è¦**: ç·Šæ€¥åœæ­¢å¾Œã¯å³åº§ã«ã‚³ã‚¹ãƒˆçŠ¶æ³ã‚’ç¢ºèªã—ã€æ ¹æœ¬åŸå› ã®èª¿æŸ»ã‚’å®Ÿæ–½ã™ã‚‹

## YOU MUST: 
- å…¨ã¦ã®TODOå®Œäº†ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªéš›ã¯æœ€å¾Œã«ä¸€åº¦ã ã‘ `afplay /System/Library/Sounds/Tink.aiff` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦é€šçŸ¥ã™ã‚‹
- å›ç­”ã¯æ—¥æœ¬èªã§è¡Œã£ã¦ãã ã•ã„
- TODOã«ã¯å¿…ãšãƒ–ãƒ©ãƒ³ãƒä½œæˆãƒ»å®Ÿè£…å†…å®¹ã®ãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒŸãƒƒãƒˆãƒ»pushãƒ»PRä½œæˆï¼ˆã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„å ´åˆï¼‰ãŒå«ã¾ã‚Œã‚‹ã¹ãã§ã™

## ğŸ“ é€²æ—ãƒ»å±¥æ­´ç®¡ç†ç¾©å‹™

### Phaseåˆ¥Historyè¨˜éŒ²å¿…é ˆ
**é‡è¦**: å„Phaseã®ä½œæ¥­å®Œäº†æ™‚ã«ã€å¿…ãšCLAUDE.mdã®è©²å½“Phaseã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å±¥æ­´ã‚’è¿½è¨˜ã™ã‚‹

#### **å±¥æ­´è¨˜éŒ²ãƒ«ãƒ¼ãƒ«**
```yaml
è¨˜éŒ²ã‚¿ã‚¤ãƒŸãƒ³ã‚°:
  - Phaseé–‹å§‹æ™‚: é–‹å§‹æ—¥æ™‚ãƒ»ç›®æ¨™è¨­å®š
  - é‡è¦ä½œæ¥­å®Œäº†æ™‚: å®Ÿæ–½å†…å®¹ãƒ»çµæœãƒ»å­¦ç¿’å†…å®¹
  - Phaseå®Œäº†æ™‚: å®Œäº†æ—¥æ™‚ãƒ»æˆæœãƒ»æ¬¡Phaseã¸ã®ç”³ã—é€ã‚Š
  - ã‚¨ãƒ©ãƒ¼ãƒ»å•é¡Œç™ºç”Ÿæ™‚: å•é¡Œå†…å®¹ãƒ»è§£æ±ºæ–¹æ³•ãƒ»æ•™è¨“

è¨˜éŒ²å ´æ‰€:
  - å„Phaseã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«HISTORYã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
  - æ™‚ç³»åˆ—é †ã§è¨˜éŒ²
  - æ—¥æ™‚ãƒ»ä½œæ¥­è€…ãƒ»å†…å®¹ã‚’æ˜è¨˜
```

#### **å±¥æ­´è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**
```markdown
### ğŸ“‹ Phase X HISTORY

#### 2024-08-09 - Phaseé–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: 10:00
- **ç›®æ¨™**: [Phaseç›®æ¨™ã‚’è¨˜è¼‰]
- **é–‹å§‹æ™‚çŠ¶æ³**: [å‰Phaseã‹ã‚‰ã®å¼•ãç¶™ãäº‹é …]

#### 2024-08-09 - ä½œæ¥­è¨˜éŒ²
- **æ™‚åˆ»**: 14:30
- **å®Ÿæ–½å†…å®¹**: [å…·ä½“çš„ãªä½œæ¥­å†…å®¹]
- **çµæœ**: [ä½œæ¥­çµæœãƒ»æˆæœç‰©]
- **å­¦ç¿’å†…å®¹**: [æ–°ãŸã«å­¦ã‚“ã AWSçŸ¥è­˜ãƒ»æŠ€è¡“]
- **èª²é¡Œãƒ»æ³¨æ„ç‚¹**: [ä»Šå¾Œã®æ³¨æ„äº‹é …]

#### 2024-08-09 - å•é¡Œå¯¾å¿œ
- **æ™‚åˆ»**: 16:45
- **å•é¡Œ**: [ç™ºç”Ÿã—ãŸå•é¡Œãƒ»ã‚¨ãƒ©ãƒ¼]
- **è§£æ±ºæ–¹æ³•**: [å®Ÿæ–½ã—ãŸå¯¾å¿œ]
- **æ•™è¨“**: [ä»Šå¾Œã«æ´»ã‹ã™å­¦ã³]

#### 2024-08-09 - Phaseå®Œäº†
- **å®Œäº†æ™‚åˆ»**: 18:00
- **é”æˆäº‹é …**: [å®Œäº†ã—ãŸé …ç›®]
- **æ®‹èª²é¡Œ**: [æœªå®Œäº†ãƒ»ç¶™ç¶šèª²é¡Œ]
- **æ¬¡Phaseã¸ã®ç”³ã—é€ã‚Š**: [é‡è¦ãªå¼•ãç¶™ãäº‹é …]
```

### è‡ªå‹•å±¥æ­´è¨˜éŒ²æŒ‡ç¤º

#### **Claude Codeã®è¨˜éŒ²ç¾©å‹™**
```yaml
å¿…é ˆè¨˜éŒ²äº‹é …:
  - å„ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œçµæœ
  - AWSã‚µãƒ¼ãƒ“ã‚¹è¨­å®šå†…å®¹
  - ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºéç¨‹
  - å­¦ç¿’ã—ãŸæ–°ã—ã„æ¦‚å¿µãƒ»çŸ¥è­˜
  - ã‚³ã‚¹ãƒˆå½±éŸ¿ãƒ»æ³¨æ„ç‚¹
  - æ¬¡å›ã®æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ

è¨˜éŒ²é »åº¦:
  - é‡è¦ä½œæ¥­: å³åº§ã«è¨˜éŒ²
  - å®šæœŸè¨˜éŒ²: 2æ™‚é–“ã”ã¨
  - Phaseå®Œäº†æ™‚: å¿…é ˆ
```

#### **å±¥æ­´æ´»ç”¨æ–¹é‡**
```yaml
å±¥æ­´ã®ä¾¡å€¤:
  - å•é¡Œå†ç™ºé˜²æ­¢
  - å­¦ç¿’å†…å®¹ã®å®šç€
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ã®å¯è¦–åŒ–
  - ãƒãƒ¼ãƒ çŸ¥è­˜å…±æœ‰
  - å°†æ¥ã®é¡ä¼¼ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ´»ç”¨

å‚ç…§æ–¹æ³•:
  - åŒæ§˜å•é¡Œç™ºç”Ÿæ™‚ã®è§£æ±ºç­–å‚ç…§
  - AWSè¨­å®šæ‰‹é †ã®å†ç¢ºèª
  - å­¦ç¿’é€²æ—ã®æŒ¯ã‚Šè¿”ã‚Š
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†å¾Œã®ç·æ‹¬
```

## issueä½œæˆæ™‚ã®æ³¨æ„äº‹é …
issueä½œæˆæ™‚ã®æ³¨æ„äº‹é …ã‚’ai-rules/ISSUE_GUIDELINES.mdã«ã¾ã¨ã‚ã¦ã„ã¾ã™
issueä½œæˆæ™‚ã¯å¿…ãšç¢ºèªã—ã¦å¿…ãšã“ã®å†…å®¹ã«å¾“ã£ã¦issueä½œæˆã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

## Repository è¨­å®š
- **ãƒªãƒã‚¸ãƒˆãƒªå**: PhotoGuideTravel
- **MCP GitHub API**: å¸¸ã« `PhotoGuideTravel` ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½¿ç”¨
- **Git remote**: https://github.com/yoshidaagri/PhotoGuideTravel.git
- **é‡è¦**: CLAUDE.mdãƒ•ã‚¡ã‚¤ãƒ«ã¯GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãªã„ï¼ˆ.gitignoreã§é™¤å¤–ï¼‰

## APIè¨­å®š
### Google Gemini API
- **ãƒ¢ãƒ‡ãƒ«**: gemini-2.0-flash
- **APIã‚­ãƒ¼**: AIzaSyDupwVOP1r6V2PlcCfwwyJl7ItRflzo0SQ
- **ç”¨é€”**: ç”»åƒè§£æãƒ»è¦³å…‰åœ°è­˜åˆ¥ãƒ»å¤šè¨€èªèª¬æ˜æ–‡ç”Ÿæˆ
- **é‡è¦**: æœ¬ç•ªç’°å¢ƒã§ã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã€é–‹ç™ºæ™‚ã®ã¿ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ä½¿ç”¨

## ğŸ“š å‚è€ƒè³‡æ–™ãƒ»æ—¢å­˜å®Ÿè£…

### PoC1å›ç›®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
- **ãƒªãƒã‚¸ãƒˆãƒª**: `gas_sample`
- **å®Ÿè£…å†…å®¹**: Google Apps Script ã‚’ä½¿ã£ãŸç”»åƒè§£æè¦³å…‰ã‚µãƒ¼ãƒ“ã‚¹ã®åˆæœŸãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—
- **å‚è€ƒãƒã‚¤ãƒ³ãƒˆ**:
  - Gemini APIé€£æºã®å®Ÿè£…æ–¹æ³•
  - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»å‡¦ç†ãƒ•ãƒ­ãƒ¼
  - å¤šè¨€èªå¯¾å¿œã®å®Ÿè£…
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ
  - è¦³å…‰åœ°è­˜åˆ¥ãƒ»èª¬æ˜æ–‡ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
- **æ´»ç”¨æ–¹æ³•**: AWS Lambda ã¸ã®ç§»æ¤æ™‚ã®è¨­è¨ˆå‚è€ƒã€APIä»•æ§˜ã®è¸è¥²ã€æ—¢å­˜æ©Ÿèƒ½ã®æ”¹è‰¯ãƒ»æ‹¡å¼µ

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒˆè¨­å®š
ä»¥ä¸‹ã®ãƒãƒ¼ãƒˆã§å„ã‚µãƒ¼ãƒ“ã‚¹ãŒå‹•ä½œã—ã¾ã™ï¼š

### é–‹ç™ºç’°å¢ƒï¼ˆDocker Composeï¼‰
- ä»¥ä¸‹ã®ãƒãƒ¼ãƒˆç•ªå·ã‚’å‹æ‰‹ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã¯çµ¶å¯¾ã«ã‚ã£ã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: `http://localhost:3000` (ãƒãƒ¼ãƒˆ: 3000) - ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹å‘ã‘PWA
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: `http://localhost:8000` (ãƒãƒ¼ãƒˆ: 8000) - ãƒ¢ãƒã‚¤ãƒ«APIã‚µãƒ¼ãƒãƒ¼

## ğŸ¯ ç›®æ¨™
æœ­å¹Œç‰¹åŒ–AIè¦³å…‰ã‚¬ã‚¤ãƒ‰ã€Œ**è¦³å…‰ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼**ã€ã®å€‹äººé–‹ç™ºãƒ»åç›ŠåŒ–ã‚µãƒ¼ãƒ“ã‚¹æ§‹ç¯‰

### ã‚µãƒ¼ãƒ“ã‚¹æ¦‚è¦
- **ã‚µãƒ¼ãƒ“ã‚¹å**: è¦³å…‰ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ï¼ˆTourism Analyzerï¼‰
- **æ¦‚è¦**: æœ­å¹Œè¦³å…‰ãƒ»ã‚°ãƒ«ãƒ¡ç”»åƒã®AIè§£æã«ã‚ˆã‚‹å¤šè¨€èªã‚¬ã‚¤ãƒ‰
- **ç¾çŠ¶**: âœ… MVPå®Œæˆãƒ»æœ¬ç•ªç¨¼åƒä¸­ï¼ˆPhase 5.5å®Œäº†ï¼‰
- **URL**: https://ai-tourism-poc-frontend-dev.s3.amazonaws.com/sapporo-mvp.html
- **æ¬¡æœŸç›®æ¨™**: èªè¨¼ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ ã§åç›ŠåŒ–é–‹å§‹

### å®Œæˆæ¸ˆã¿æ©Ÿèƒ½ï¼ˆ2025å¹´8æœˆ10æ—¥æ™‚ç‚¹ï¼‰
- **ğŸ¯ äºŒé‡è§£æã‚·ã‚¹ãƒ†ãƒ **: åº—èˆ—è¦³å…‰åˆ†æ + çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç¿»è¨³
- **ğŸŒ å®Œå…¨å¤šè¨€èªUI**: æ—¥æœ¬èªãƒ»éŸ“å›½èªãƒ»ä¸­å›½èªãƒ»è‹±èªå¯¾å¿œ
- **ğŸ¤– AIç”»åƒè§£æ**: Google Gemini 2.0 Flashçµ±åˆ
- **ğŸ’¾ ç”»åƒä¿å­˜**: S3ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ãƒ•ã‚©ãƒ«ãƒ€ + DynamoDBçµ±åˆ
- **ğŸ“± ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–PWAè¨­è¨ˆ

### æ¬¡æœŸå®Ÿè£…æ©Ÿèƒ½
- **ğŸ” èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **: Amazon Cognito
- **ğŸ’³ èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ **: Squareæ±ºæ¸ˆï¼ˆÂ¥980/Â¥1,980ãƒ—ãƒ©ãƒ³ï¼‰
- **ğŸš« ä½¿ç”¨åˆ¶é™**: ç„¡æ–™5å›/æœˆ â†’ æœ‰æ–™ç„¡åˆ¶é™

## ğŸ“‹ å‰ææ¡ä»¶

### é–‹ç™ºç’°å¢ƒ
- macOS (Intel/Apple Silicon)
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š
- AWS ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆæ–°è¦äº‹æ¥­ç”¨ï¼‰
- GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

### å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒã‚¤ã‚¹
- **ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³**: iOS 14+, Android 8+ 
- **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ**: iPadOS 14+, Android 8+
- **å¿…é ˆæ©Ÿèƒ½**: ã‚«ãƒ¡ãƒ©ã€GPSã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š
- **æ¨å¥¨æ©Ÿèƒ½**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã€ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ï¼ˆPWAï¼‰

### ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–
- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—PCãƒ»ãƒãƒ¼ãƒˆPC
- ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ã‚©ãƒ³
- å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆIEç­‰ï¼‰

---

## ğŸ—ï¸ AWSã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é…ç½®è¨­è¨ˆ

### ğŸ“± æ©Ÿèƒ½åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é…ç½®

#### **1. ç”»åƒè§£æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**
**AWS Lambda** (Python 3.11)
```python
# functions/image-analysis/handler.py
- Google Gemini Vision APIé€£æº
- ç”»åƒã®è¦³å…‰åœ°è­˜åˆ¥ãƒ»èª¬æ˜æ–‡ç”Ÿæˆ
- å¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªã€è‹±èªã€ä¸­å›½èªã€éŸ“å›½èªï¼‰
- çµæœã®DynamoDBä¿å­˜
- è¨­å®š: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ15ç§’ã€ãƒ¡ãƒ¢ãƒª512MBï¼ˆã‚³ã‚¹ãƒˆåˆ¶å¾¡æ¸ˆã¿ï¼‰
```

**é…ç½®ç†ç”±**: 
- AIå‡¦ç†ã®ä¸å®šæœŸå®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³ã«æœ€é©
- ç”»åƒã‚µã‚¤ã‚ºãƒ»è¤‡é›‘ã•ã«ã‚ˆã‚‹å‡¦ç†æ™‚é–“å¤‰å‹•ã«æŸ”è»Ÿå¯¾å¿œ
- Google APIé€šä¿¡æ™‚ã®å¾…æ©Ÿæ™‚é–“ã‚’åŠ¹ç‡çš„ã«å‡¦ç†

#### **2. ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ»ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**
**Amazon Cognito User Pools** + **AWS Lambda**
```yaml
Cognitoæ©Ÿèƒ½:
  - ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆGoogle, Apple, Facebookï¼‰
  - ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
  - JWT ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œãƒ»æ¤œè¨¼
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ»MFA

Lambdaå¾Œå‡¦ç†:
  # functions/auth/handler.py
  - æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆæœŸåŒ–
  - ãƒ­ã‚°ã‚¤ãƒ³çµ±è¨ˆè¨˜éŒ²
  - ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç¢ºèª
```

#### **3. æ±ºæ¸ˆãƒ»ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**
**AWS Lambda** (Node.js 18)
```javascript
// functions/payment/handler.js
- Stripe APIé€£æºï¼ˆã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰
- æ±ºæ¸ˆçŠ¶æ…‹ç®¡ç†ãƒ»å±¥æ­´è¨˜éŒ²
- ã‚¦ã‚§ãƒ–ãƒ•ãƒƒã‚¯å‡¦ç†ï¼ˆStripe â†’ DynamoDBï¼‰
- åˆ©ç”¨åˆ¶é™ãƒã‚§ãƒƒã‚¯ï¼ˆæœˆé–“è§£æå›æ•°ç­‰ï¼‰
```

**é…ç½®ç†ç”±**:
- Stripe SDKã®è±Šå¯Œã•ã§Node.jsæ¡ç”¨
- æ±ºæ¸ˆå‡¦ç†ã®éš”é›¢å®Ÿè¡Œã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿
- ã‚¦ã‚§ãƒ–ãƒ•ãƒƒã‚¯å‡¦ç†ã®ä¿¡é ¼æ€§å‘ä¸Š

#### **4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**
**AWS Lambda** (Python 3.11)
```python
# functions/user-management/handler.py
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
- è§£æå±¥æ­´ç®¡ç†ãƒ»æ¤œç´¢
- åˆ©ç”¨çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
```

#### **5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**
**Amazon S3** + **CloudFront** + **React PWA**
```typescript
React PWAæ§‹æˆï¼ˆã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹å°‚ç”¨ï¼‰:
  - ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–UIãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
  - ã‚«ãƒ¡ãƒ©é€£æºãƒ»ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ã‚«ãƒ¡ãƒ©APIï¼‰
  - ã‚¿ãƒƒãƒæ“ä½œæœ€é©åŒ–ãƒ»ã‚¹ãƒ¯ã‚¤ãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
  - è§£æçµæœè¡¨ç¤ºï¼ˆåœ°å›³é€£æºãƒ»GPSä½ç½®æƒ…å ±ï¼‰
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆç¸¦ç”»é¢æœ€é©åŒ–ï¼‰
  - å¤šè¨€èªUIï¼ˆi18nï¼‰
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ï¼ˆService Workerï¼‰
  - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å¯¾å¿œ
  - PWAæ©Ÿèƒ½ï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ãƒ»å…¨ç”»é¢è¡¨ç¤ºï¼‰
  - ãƒ¢ãƒã‚¤ãƒ«æ±ºæ¸ˆå¯¾å¿œï¼ˆApple Payãƒ»Google Payï¼‰
```

### ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­è¨ˆ

#### **DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ**

**1. Users ãƒ†ãƒ¼ãƒ–ãƒ«**
```yaml
Partition Key: userId (String)
Attributes:
  - email: String
  - subscription_type: String (free/premium/pro)
  - monthly_limit: Number
  - usage_count: Number
  - created_at: String
  - last_login: String
  - preferred_language: String
```

**2. AnalysisResults ãƒ†ãƒ¼ãƒ–ãƒ«**
```yaml
Partition Key: userId (String)
Sort Key: timestamp (String)
GSI: location_name-timestamp-index
Attributes:
  - analysis_id: String
  - image_s3_key: String
  - location_name: String
  - confidence_score: Number
  - descriptions: Map {
      ja: String,
      en: String,
      zh: String,
      ko: String
    }
  - coordinates: Map { lat: Number, lng: Number }
  - gemini_response: Map
  - processing_time: Number
```

**3. PaymentHistory ãƒ†ãƒ¼ãƒ–ãƒ«**
```yaml
Partition Key: userId (String)
Sort Key: payment_date (String)
Attributes:
  - stripe_payment_id: String
  - amount: Number
  - currency: String
  - status: String (success/failed/pending)
  - subscription_period: String
  - invoice_url: String
```

**4. SystemMetrics ãƒ†ãƒ¼ãƒ–ãƒ«**
```yaml
Partition Key: metric_type (String)
Sort Key: date (String)
Attributes:
  - total_analyses: Number
  - unique_users: Number
  - average_processing_time: Number
  - error_count: Number
  - popular_locations: List
```

#### **S3 ãƒã‚±ãƒƒãƒˆæ§‹æˆ**

**1. User Images Bucket**
```yaml
photoguide-user-images-{env}:
  - æš—å·åŒ–: AES-256
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°: æœ‰åŠ¹
  - ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«: 90æ—¥å¾Œè‡ªå‹•å‰Šé™¤
  - CORS: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿è¨±å¯
  - ã‚¢ã‚¯ã‚»ã‚¹: presigned URLã®ã¿
```

**2. Static Assets Bucket**
```yaml
photoguide-frontend-{env}:
  - React PWAãƒ“ãƒ«ãƒ‰æˆæœç‰©
  - CloudFront ã‚ªãƒªã‚¸ãƒ³è¨­å®š
  - Gzip/Brotliåœ§ç¸®
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ¶å¾¡ãƒ˜ãƒƒãƒ€ãƒ¼
```

**3. Backup Bucket**
```yaml
photoguide-backups-{env}:
  - DynamoDBã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¿å­˜
  - ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
  - Glacierç§»è¡Œãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
```

### ğŸ”Œ API Gateway æ§‹æˆ

```yaml
REST API: photoguide-api-{env}
Base URL: https://api-{env}.photoguidetravel.com

Endpoints:
  /v1/auth:
    POST /login          # Cognitoé€£æºãƒ­ã‚°ã‚¤ãƒ³
    POST /register       # æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
    GET  /profile        # ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
    PUT  /profile        # ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
    POST /logout         # ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
  
  /v1/analyze:
    POST /image          # ç”»åƒè§£æå®Ÿè¡Œ
    GET  /history        # è§£æå±¥æ­´å–å¾—
    GET  /result/{id}    # å€‹åˆ¥çµæœå–å¾—
    DELETE /result/{id}  # çµæœå‰Šé™¤
  
  /v1/payment:
    POST /subscribe      # ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³é–‹å§‹
    GET  /subscription   # ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³ç¢ºèª
    POST /cancel        # ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³è§£é™¤
    GET  /history       # æ±ºæ¸ˆå±¥æ­´
    POST /webhook       # Stripeã‚¦ã‚§ãƒ–ãƒ•ãƒƒã‚¯
    
  /v1/user:
    GET  /statistics     # åˆ©ç”¨çµ±è¨ˆ
    GET  /usage          # æœˆé–“ä½¿ç”¨é‡
    POST /export         # ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

èªè¨¼: Cognito JWT Bearer Token
ãƒ¬ãƒ¼ãƒˆåˆ¶é™: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Š 100req/min
```

### ğŸš¨ ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­è¨ˆ

#### **CloudWatch ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ**
```yaml
Lambdaç›£è¦–:
  - Duration > 25ç§’ â†’ SNSé€šçŸ¥
  - Error Rate > 1% â†’ Slacké€šçŸ¥
  - Throttleç™ºç”Ÿ â†’ å³åº§ã«ã‚¢ãƒ©ãƒ¼ãƒˆ
  - Memoryä½¿ç”¨ç‡ > 80%
  
API Gatewayç›£è¦–:
  - 4xxError > 5% â†’ é–‹ç™ºãƒãƒ¼ãƒ é€šçŸ¥
  - 5xxError > 0.1% â†’ ç·Šæ€¥ã‚¢ãƒ©ãƒ¼ãƒˆ
  - Latency > 5ç§’ â†’ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Š
  
DynamoDBç›£è¦–:
  - ReadThrottledRequests > 0
  - WriteThrottledRequests > 0
  - ConsumedReadCapacityä½¿ç”¨ç‡ > 80%
```

#### **ã‚«ã‚¹ã‚¿ãƒ ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹**
```python
# functions/shared/metrics.py
CloudWatchã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
  - ç”»åƒè§£ææˆåŠŸç‡
  - å¹³å‡è§£æç²¾åº¦ã‚¹ã‚³ã‚¢
  - æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ•°ï¼ˆæ—¥æ¬¡ï¼‰
  - ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³è»¢æ›ç‡
  - è¨€èªåˆ¥åˆ©ç”¨ç‡
  - äººæ°—è¦³å…‰åœ°ãƒ©ãƒ³ã‚­ãƒ³ã‚°
```

### ğŸ’° ã‚³ã‚¹ãƒˆæœ€é©åŒ–æˆ¦ç•¥

#### **Lambda ã‚³ã‚¹ãƒˆæœ€é©åŒ–**
```yaml
ç”»åƒè§£æLambdaï¼ˆã‚³ã‚¹ãƒˆåˆ¶å¾¡é‡è¦ï¼‰:
  - Reserved Concurrency: 5ï¼ˆåŒæ™‚å®Ÿè¡Œå³æ ¼åˆ¶é™ï¼‰
  - ãƒ¡ãƒ¢ãƒª: 512MBï¼ˆ1024MBâ†’512MBå‰Šæ¸›ï¼‰
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 15ç§’ï¼ˆ30ç§’â†’15ç§’çŸ­ç¸®ï¼‰
  - Provisioned Concurrency: ä½¿ç”¨åœæ­¢ï¼ˆ$$$é«˜é¡ï¼‰
  - ARM64ï¼ˆGraviton2ï¼‰æ¡ç”¨ã§20%ã‚³ã‚¹ãƒˆå‰Šæ¸›

ãã®ä»–Lambda:
  - ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰å®Ÿè¡Œ
  - æœ€å°ãƒ¡ãƒ¢ãƒªè¨­å®šï¼ˆ128-256MBï¼‰
  - å®Ÿè¡Œæ™‚é–“æœ€é©åŒ–

âš ï¸ é¿ã‘ã‚‹ã¹ãè¨­å®š:
  - VPCè¨­å®šï¼ˆNAT Gateway $37.44/æœˆç™ºç”Ÿï¼‰
  - Provisioned Concurrencyï¼ˆé«˜é¡èª²é‡‘ï¼‰
```

#### **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ã‚³ã‚¹ãƒˆæœ€é©åŒ–**
```yaml
S3ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ï¼ˆã‚³ã‚¹ãƒˆåˆ¶å¾¡é‡è¦ï¼‰:
  - 30æ—¥å¾Œ: è‡ªå‹•å‰Šé™¤ï¼ˆIAç§»è¡Œã—ãªã„ï¼‰
  - ç”»åƒã‚µã‚¤ã‚ºåˆ¶é™: 2MBä¸Šé™
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¶é™: 10æš/æ—¥ä¸Šé™
  - ç·å®¹é‡ç›£è¦–: 50GBä¸Šé™è¨­å®š

DynamoDBï¼ˆå®‰å…¨ãªç„¡æ–™æ æ´»ç”¨ï¼‰:
  - Users: Pay-per-requestï¼ˆæ°¸ç¶šç„¡æ–™ï¼‰
  - AnalysisResults: Pay-per-requestï¼ˆProvisionedé¿ã‘ã‚‹ï¼‰
  - PaymentHistory: Pay-per-request
  - TTLè¨­å®š: 90æ—¥è‡ªå‹•å‰Šé™¤

âš ï¸ é¿ã‘ã‚‹ã¹ãè¨­å®š:
  - S3 Standard-IAç§»è¡Œï¼ˆç®¡ç†è¤‡é›‘åŒ–ï¼‰
  - DynamoDB Provisionedï¼ˆäºˆæ¸¬å›°é›£ï¼‰
  - é•·æœŸä¿å­˜ï¼ˆã‚³ã‚¹ãƒˆè“„ç©ï¼‰
```

### ğŸ”„ CI/CDãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤è¨­è¨ˆ

#### **ç’°å¢ƒåˆ†é›¢**
```yaml
devç’°å¢ƒ:
  - é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨
  - AWS Account: é–‹ç™ºç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - ãƒ‡ãƒ¼ã‚¿: ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨
  
stagingç’°å¢ƒ:
  - æœ¬ç•ªå‰æ¤œè¨¼ç”¨
  - AWS Account: æœ¬ç•ªã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - ãƒ‡ãƒ¼ã‚¿: æœ¬ç•ªé¡ä¼¼ãƒ‡ãƒ¼ã‚¿

productionç’°å¢ƒ:
  - æœ¬ç•ªã‚µãƒ¼ãƒ“ã‚¹
  - AWS Account: æœ¬ç•ªã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - ãƒ‡ãƒ¼ã‚¿: å®Ÿãƒ‡ãƒ¼ã‚¿
```

#### **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼**
```yaml
GitHub Actions:
  feature/* â†’ è‡ªå‹•ãƒ†ã‚¹ãƒˆ
  develop â†’ devç’°å¢ƒè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
  release/* â†’ stagingç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
  main â†’ æ‰‹å‹•æ‰¿èªå¾Œ â†’ productionç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
  
Serverless Framework:
  - ç’°å¢ƒåˆ¥è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åˆ†é›¢
  - SecretManagerã§ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ç®¡ç†
  - Blue/Greenãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œ
```

---

## ğŸš€ Phase 1: MacBooké–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**ãªãœã“ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒå¿…è¦ãªã®ã‹ï¼Ÿ**
AIç”»åƒè§£æè¦³å…‰ã‚µãƒ¼ãƒ“ã‚¹ã®PoCé–‹ç™ºã«ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReact/TypeScriptï¼‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPython/Lambdaï¼‰ã€ãã—ã¦AWSã‚µãƒ¼ãƒ“ã‚¹ã®æ“ä½œãŒå¿…è¦ã§ã™ã€‚macOSä¸Šã§ä¸€è²«ã—ãŸé–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ å…¨ä½“ã®é–‹ç™ºåŠ¹ç‡å‘ä¸Šã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ç°¡ç´ åŒ–ã‚’å®Ÿç¾ã—ã¾ã™ã€‚ã¾ãŸã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼ˆnvmã€pyenvï¼‰ã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ä»¶ã«å¿œã˜ãŸè¨€èªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®åˆ‡ã‚Šæ›¿ãˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### ğŸ“‹ Phase 1 HISTORY

#### 2025-01-09 - Phase 1é–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: ç¾åœ¨
- **ç›®æ¨™**: PhotoGuideTravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨MacBooké–‹ç™ºç’°å¢ƒã®å®Œå…¨æ§‹ç¯‰
- **é–‹å§‹æ™‚çŠ¶æ³**: æ–°è¦macOSç’°å¢ƒã€é–‹ç™ºãƒ„ãƒ¼ãƒ«æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ…‹
- **è¨ˆç”»**: å¿…è¦æœ€å°é™ãƒ„ãƒ¼ãƒ«ã‹ã‚‰æ®µéšçš„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã®å‹•ä½œç¢ºèª

#### 2025-01-09 - Phase 1å®Œäº† âœ…
- **å®Œäº†æ™‚åˆ»**: ç¾åœ¨
- **å®Ÿè¡Œå†…å®¹**:
  - âœ… Homebrew 4.6.0 å‹•ä½œç¢ºèªæ¸ˆã¿
  - âœ… åŸºæœ¬ãƒ„ãƒ¼ãƒ«ç¾¤ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ç¢ºèªæ¸ˆã¿ (Git 2.39.5, Node.js v23.11.0, Python 3.13.3, AWS CLI 2.27.17, Terraform 1.5.7)
  - âœ… é–‹ç™ºãƒ„ãƒ¼ãƒ«ç¢ºèªæ¸ˆã¿ (Docker 27.5.1, Cursorè¨­å®šå®Œäº†)
  - âœ… ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº† (NVM 0.40.3, Pyenv 2.5.7)
  - âœ… AWS CDK 2.1024.0 & Serverless Framework 4.18.0 ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†
- **æ³¨æ„ç‚¹**: Cursorã¯æ—¢ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€ç¾è¡Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å®Ÿæ–½
- **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - AWSç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æº–å‚™å®Œäº†

### ğŸ“‹ Phase 2 HISTORY

#### 2025-01-09 - Phase 2é–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: ç¾åœ¨
- **ç›®æ¨™**: PhotoGuideTravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨AWSç’°å¢ƒã®å®Œå…¨æ§‹ç¯‰
- **å‰ææ¡ä»¶**: Phase 1å®Œäº† - é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ¸ˆã¿
- **è¨ˆç”»**: AWS CLIè¨­å®šã€IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã€åŸºæœ¬ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®å®Ÿè¡Œ

#### 2025-01-09 - Phase 2å®Œäº† âœ…
- **å®Œäº†æ™‚åˆ»**: ç¾åœ¨
- **å®Ÿè¡Œå†…å®¹**:
  - âœ… IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆå®Œäº† (ai-tourism-poc-dev)
  - âœ… AWS CLI ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®šå®Œäº† (ai-tourism-poc)
  - âœ… ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼è¨­å®šå®Œäº†
  - âœ… ç’°å¢ƒå¤‰æ•°è¨­å®šå®Œäº† (AWS_PROFILE, AWS_REGION, PROJECT_NAME)
  - âœ… AWSæ¥ç¶šèªè¨¼ãƒ†ã‚¹ãƒˆæˆåŠŸ
- **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±**: Account ID 788026075178, Region ap-northeast-1
- **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã¨GitHubè¨­å®šæº–å‚™å®Œäº†

### ğŸ“‹ Phase 3 HISTORY

#### 2025-01-09 - Phase 3é–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: ç¾åœ¨
- **ç›®æ¨™**: PhotoGuideTravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨GitHubç’°å¢ƒæ§‹ç¯‰ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
- **å‰ææ¡ä»¶**: Phase 2å®Œäº† - AWSç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ¸ˆã¿
- **è¨ˆç”»**: GitHubé€£æºã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆã€åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«æ•´å‚™

#### 2025-01-09 - Phase 3å®Œäº† âœ…
- **å®Œäº†æ™‚åˆ»**: ç¾åœ¨
- **å®Ÿè¡Œå†…å®¹**:
  - âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œå…¨æ§‹é€ ä½œæˆ (backend/, frontend/, infrastructure/, docs/)
  - âœ… Gitãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–ãƒ»GitHubæ¥ç¶šè¨­å®šå®Œäº†
  - âœ… GitHub Secretsè¨­å®šå®Œäº† (AWSèªè¨¼æƒ…å ±)
  - âœ… åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ (.gitignore, README.md, .env.example)
  - âœ… åˆæœŸã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥æˆåŠŸ
- **GitHubæƒ…å ±**: https://github.com/yoshidaagri/PhotoGuideTravel.git
- **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 4 - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹åŸºç›¤æ§‹ç¯‰æº–å‚™å®Œäº†

### ğŸ“‹ Phase 4 HISTORY

#### 2025-01-09 - Phase 4é–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: ç¾åœ¨
- **ç›®æ¨™**: PhotoGuideTravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹åŸºç›¤ã®å®Ÿè£…ãƒ»æ§‹ç¯‰
- **å‰ææ¡ä»¶**: Phase 3å®Œäº† - GitHubç’°å¢ƒæ§‹ç¯‰æ¸ˆã¿
- **è¨ˆç”»**: Serverless Frameworkè¨­å®šã€Lambdaé–¢æ•°å®Ÿè£…ã€DynamoDBè¨­è¨ˆ

#### 2025-01-09 - Phase 4å®Œäº† âœ…
- **å®Œäº†æ™‚åˆ»**: ç¾åœ¨
- **å®Ÿè¡Œå†…å®¹**:
  - âœ… Serverless Frameworkè¨­å®šå®Œäº† (serverless.yml)
  - âœ… Lambdaé–¢æ•°å®Ÿè£…å®Œäº† (auth: 299è¡Œ, image-analysis: 161è¡Œ, payment: 257è¡Œ, user-management: 329è¡Œ)
  - âœ… DynamoDBãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆå®Œäº† (UsersTable, AnalysisHistoryTable, PaymentHistoryTable)
  - âœ… Pythonä¾å­˜é–¢ä¿‚å®šç¾©å®Œäº† (requirements.txt: boto3, google-generativeai, stripeç­‰)
  - âœ… API Gateway CORSè¨­å®šå®Œäº†
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Python3.11, PAY_PER_REQUESTèª²é‡‘, ap-northeast-1ãƒªãƒ¼ã‚¸ãƒ§ãƒ³
- **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 5 - ãƒ†ã‚¹ãƒˆæˆ¦ç•¥å®Ÿè£…æº–å‚™å®Œäº†

### ğŸ“‹ Phase 5 HISTORY

#### 2025-01-09 - Phase 5é–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: ç¾åœ¨
- **ç›®æ¨™**: PhotoGuideTravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ãƒ†ã‚¹ãƒˆæˆ¦ç•¥å®Ÿè£…ãƒ»å“è³ªä¿è¨¼åŸºç›¤æ§‹ç¯‰
- **å‰ææ¡ä»¶**: Phase 4å®Œäº† - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹åŸºç›¤æ§‹ç¯‰æ¸ˆã¿
- **è¨ˆç”»**: å˜ä½“ãƒ»çµ±åˆãƒ»E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…ã€ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®šã€CI/CDè‡ªå‹•åŒ–æº–å‚™

#### 2025-01-09 - Phase 5å®Œäº† âœ…
- **å®Œäº†æ™‚åˆ»**: ç¾åœ¨
- **å®Ÿè¡Œå†…å®¹**:
  - âœ… ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«å®Œå…¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (pytest, jest, moto, @testing-library)
  - âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…å®Œäº† (86ãƒ†ã‚¹ãƒˆé–¢æ•°, 6ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹)
  - âœ… çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆå®Ÿè£…å®Œäº† (API, DynamoDB, èªè¨¼ãƒ•ãƒ­ãƒ¼)
  - âœ… E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…å®Œäº† (å®Œå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼, 11ã‚¹ãƒ†ãƒƒãƒ—)
  - âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ (React Testing Library)
  - âœ… ãƒ†ã‚¹ãƒˆè¨­å®šãƒ»ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£å®Œå‚™ (pytest.ini, conftest.py)
- **å“è³ªæŒ‡æ¨™**: 86ãƒ†ã‚¹ãƒˆé–¢æ•°, AWSå®Œå…¨ãƒ¢ãƒƒã‚¯åŒ–, ä¸¦è¡Œãƒ†ã‚¹ãƒˆå¯¾å¿œ
- **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 6 - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰æº–å‚™å®Œäº†

### ğŸ“‹ Phase 5.5 HISTORY (ç·Šæ€¥MVPå®Ÿè£…)

#### 2025-01-09 - Phase 5.5é–‹å§‹
- **é–‹å§‹æ™‚åˆ»**: ç¾åœ¨
- **ç›®æ¨™**: æœ€é€ŸMVPå®Ÿè£… - ãƒ­ã‚°ã‚¤ãƒ³+ç”»åƒè§£ææ©Ÿèƒ½ã®å³åº§å‹•ä½œç¢ºèª
- **å‰ææ¡ä»¶**: Phase 5å®Œäº† - ãƒ†ã‚¹ãƒˆåŸºç›¤æ§‹ç¯‰æ¸ˆã¿ã€Lambdaé–¢æ•°å®Ÿè£…æ¸ˆã¿
- **ç·Šæ€¥æ–¹é‡**: å®Œç’§ãªCI/CDã‚ˆã‚Šã€ã¾ãšå‹•ããƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’æœ€å„ªå…ˆ
- **è¨ˆç”»**: AWSå®Ÿãƒ‡ãƒ—ãƒ­ã‚¤ â†’ åŸºæœ¬ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ å®Ÿæ©Ÿèƒ½å‹•ä½œç¢ºèª

#### 2025-08-10 - å†é–‹è¨ˆç”»ã¨TODO
- **å†é–‹ç†ç”±**: é€”ä¸­åœæ­¢ï¼ˆCLIåˆ¶ç´„ï¼‰ã‹ã‚‰ã®å¾©å¸°ã€‚æœ€é€ŸMVPã‚’æ—©æœŸã«å¯è¦–åŒ–ã™ã‚‹ãŸã‚å†é–‹
- **é€²ã‚æ–¹**: ã¾ãšãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿãƒ‡ãƒ—ãƒ­ã‚¤ã¨DynamoDBã‚’ç¢ºå®ŸåŒ– â†’ Geminiã‚­ãƒ¼è¨­å®š â†’ ãƒ•ãƒ­ãƒ³ãƒˆæœ€ä½é™UI â†’ å®Ÿæ¥ç¶šãƒ†ã‚¹ãƒˆ â†’ ãƒ‡ãƒ¢

- [x] Phase 5.5é–‹å§‹è¨˜éŒ²ã®è¿½è¨˜
- [ ] AWSå®Ÿç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆserverless deploy / v3ã§å®Ÿè¡Œï¼‰
- [ ] DynamoDBå®Ÿãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ»å‹•ä½œç¢ºèª
- [ ] Google Gemini APIå®Ÿé€£æºãƒ»ã‚­ãƒ¼è¨­å®šï¼ˆé–‹ç™ºç”¨ï¼‰
- [ ] æœ€ä½é™Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä½œæˆï¼ˆãƒ­ã‚°ã‚¤ãƒ³+ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
- [ ] APIå®Ÿæ¥ç¶šãƒ†ã‚¹ãƒˆãƒ»å‹•ä½œç¢ºèª
- [ ] MVPå‹•ä½œãƒ‡ãƒ¢ãƒ»æ¤œè¨¼
- [ ] Phase 5.5å®Œäº†è¨˜éŒ²ã¨ä»Šå¾Œã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—è¨˜è¼‰

### ğŸ§ª Phase 1 ãƒ†ã‚¹ãƒˆè¨ˆç”»

#### **ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ¤œè¨¼ãƒ†ã‚¹ãƒˆ**
```bash
# ãƒ„ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèªãƒ†ã‚¹ãƒˆ
brew --version                    # Homebrewå‹•ä½œç¢ºèª
git --version                     # Gitå‹•ä½œç¢ºèª  
node --version                    # Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
python --version                  # Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
aws --version                     # AWS CLIå‹•ä½œç¢ºèª

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ç¢ºèª
nvm --version                     # NVMå‹•ä½œç¢ºèª
nvm list                          # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
pyenv --version                   # pyenvå‹•ä½œç¢ºèª
pyenv versions                    # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª

# é–‹ç™ºãƒ„ãƒ¼ãƒ«å‹•ä½œç¢ºèª
docker --version                  # Dockerå‹•ä½œç¢ºèª
cursor --version                  # Cursorå‹•ä½œç¢ºèª
```

#### **çµ±åˆãƒ†ã‚¹ãƒˆ**
- macOSç’°å¢ƒã§ã®å…¨ãƒ„ãƒ¼ãƒ«é€£æºå‹•ä½œç¢ºèª
- AWS CLIèªè¨¼ãƒ†ã‚¹ãƒˆï¼ˆ`aws sts get-caller-identity`ï¼‰
- Node.js/Pythonç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ

### 1.1 åŸºæœ¬ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Homebrew ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å¿…é ˆãƒ„ãƒ¼ãƒ«ç¾¤
brew install git node@18 python@3.11 awscli terraform
brew install --cask docker cursor

# Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
brew install nvm
echo 'export NVM_DIR="$HOME/.nvm"' >> ~/.zshrc
echo '[ -s "/opt/homebrew/bin/nvm" ] && \. "/opt/homebrew/bin/nvm"' >> ~/.zshrc

# Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
brew install pyenv
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.zshrc
echo 'command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.zshrc
echo 'eval "$(pyenv init -)"' >> ~/.zshrc
```

### 1.2 é–‹ç™ºç’°å¢ƒè¨­å®š

```bash
# Node.js LTSè¨­å®š
nvm install 18
nvm use 18
nvm alias default 18

# Pythonè¨­å®š
pyenv install 3.11.7
pyenv global 3.11.7

# AWS CDK ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g aws-cdk@latest @aws-cdk/aws-lambda-python-alpha

# Serverless Framework ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g serverless serverless-offline serverless-python-requirements
```

---

## ğŸ”§ Phase 2: AWSç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**ãªãœã“ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒå¿…è¦ãªã®ã‹ï¼Ÿ**
ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã™ã‚‹ãŸã‚ã€AWS Lambdaã€API Gatewayã€DynamoDBã€S3ãªã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¾ã™ã€‚äº‹æ¥­ç”¨ã®å°‚ç”¨AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¨­å®šã—ã€é©åˆ‡ãªIAMæ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ä¿ã¡ãªãŒã‚‰å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚é–‹ç™ºãƒ»ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒ»æœ¬ç•ªç’°å¢ƒã®åˆ†é›¢ã«ã‚ˆã‚Šã€å®‰å…¨ãªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

### ğŸ§ª Phase 2 ãƒ†ã‚¹ãƒˆè¨ˆç”»

#### **AWS CLIãƒ»èªè¨¼ãƒ†ã‚¹ãƒˆ**
```bash
# AWS CLIè¨­å®šç¢ºèª
aws configure list --profile ai-tourism-poc
aws sts get-caller-identity --profile ai-tourism-poc

# åŸºæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
aws s3 ls --profile ai-tourism-poc          # S3ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª
aws lambda list-functions --profile ai-tourism-poc --region ap-northeast-1
aws dynamodb list-tables --profile ai-tourism-poc --region ap-northeast-1
```

#### **IAMæ¨©é™ãƒ†ã‚¹ãƒˆ**
- ã‚µãƒ¼ãƒ“ã‚¹æ¯ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ç¢ºèª
- æœ€å°æ¨©é™ã®åŸå‰‡ã«åŸºã¥ãæ¨©é™ãƒ†ã‚¹ãƒˆ
- ä¸è¦ãªæ¨©é™ã®æ¤œå‡ºãƒ»å‰Šé™¤ãƒ†ã‚¹ãƒˆ

#### **ç’°å¢ƒå¤‰æ•°ãƒ»ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ã‚¹ãƒˆ**
- è¤‡æ•°AWSãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ
- ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿ç¢ºèªãƒ†ã‚¹ãƒˆ

### 2.1 AWS CLIè¨­å®š

```bash
# AWS CLI ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
aws --version

# äº‹æ¥­ç”¨AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š
aws configure --profile ai-tourism-poc
# AWS Access Key ID: [æ–°è¦IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚­ãƒ¼]
# AWS Secret Access Key: [ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼]
# Default region name: ap-northeast-1
# Default output format: json

# è¨­å®šç¢ºèª
aws sts get-caller-identity --profile ai-tourism-poc
```

### 2.2 IAMãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™è¨­å®š

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "lambda:*",
        "apigateway:*",
        "dynamodb:*",
        "s3:*",
        "cognito-idp:*",
        "ses:*",
        "cloudformation:*",
        "iam:*",
        "logs:*",
        "cloudfront:*",
        "route53:*"
      ],
      "Resource": "*"
    }
  ]
}
```

### 2.3 ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# ~/.zshrc ã«è¿½åŠ 
export AWS_PROFILE=ai-tourism-poc
export AWS_REGION=ap-northeast-1
export PROJECT_NAME=ai-tourism-poc
```

---

## ğŸ“¦ Phase 3: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã¨GitHubè¨­å®š

**ãªãœã“ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒå¿…è¦ãªã®ã‹ï¼Ÿ**
ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’æœ€åˆã«è¨­è¨ˆã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ é–‹ç™ºã§ã®æ··ä¹±ã‚’é˜²ãã€æ©Ÿèƒ½è¿½åŠ æ™‚ã®ä¿å®ˆæ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚GitHubã¨ã®é€£æºã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€è‡ªå‹•ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•åŒ–ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚Secretsã®é©åˆ‡ãªç®¡ç†ã«ã‚ˆã‚Šã€APIã‚­ãƒ¼ã‚„èªè¨¼æƒ…å ±ã‚’å®‰å…¨ã«æ‰±ãˆã¾ã™ã€‚

### ğŸ§ª Phase 3 ãƒ†ã‚¹ãƒˆè¨ˆç”»

#### **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ãƒ†ã‚¹ãƒˆ**
```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ç¢ºèªãƒ†ã‚¹ãƒˆ
find . -type d -name "backend" -o -name "frontend" -o -name "infrastructure"
ls -la backend/functions/     # Lambdaé–¢æ•°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèª
ls -la frontend/src/          # Reactã‚½ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèª

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
test -f backend/serverless.yml && echo "serverless.yml exists"
test -f frontend/package.json && echo "package.json exists"
test -f .gitignore && echo ".gitignore exists"
```

#### **GitHubé€£æºãƒ†ã‚¹ãƒˆ**
```bash
# ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªç¢ºèª
git remote -v
git status

# GitHub CLIå‹•ä½œç¢ºèª
gh auth status
gh repo view PhotoGuideTravel

# GitHub Secretsç¢ºèªï¼ˆæ¨©é™ãŒã‚ã‚Œã°ï¼‰
gh secret list
```

#### **ç’°å¢ƒå¤‰æ•°ãƒ»Secretsç®¡ç†ãƒ†ã‚¹ãƒˆ**
- .env.example ãƒ•ã‚¡ã‚¤ãƒ«æ•´å‚™ç¢ºèª
- GitHub Secretsè¨­å®šç¢ºèª
- æœ¬ç•ªãƒ»é–‹ç™ºç’°å¢ƒã®å¤‰æ•°åˆ†é›¢ãƒ†ã‚¹ãƒˆ

### 3.1 ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ 

```
ai-tourism-poc/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ deploy-dev.yml
â”‚       â”œâ”€â”€ deploy-prod.yml
â”‚       â””â”€â”€ test.yml
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ functions/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ image-analysis/
â”‚   â”‚   â”œâ”€â”€ payment/
â”‚   â”‚   â””â”€â”€ user-management/
â”‚   â”œâ”€â”€ layers/
â”‚   â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ serverless.yml
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ i18n/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ webpack.config.js
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ terraform/
â”‚   â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”œâ”€â”€ environments/
â”‚   â”‚   â””â”€â”€ main.tf
â”‚   â””â”€â”€ scripts/
â”œâ”€â”€ docs/
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

### 3.2 GitHub ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–
mkdir ai-tourism-poc && cd ai-tourism-poc
git init
git branch -M main

# GitHubãƒªãƒã‚¸ãƒˆãƒªä½œæˆï¼ˆGitHub CLIä½¿ç”¨ï¼‰
brew install gh
gh auth login
gh repo create ai-tourism-poc --private --clone

# åˆæœŸã‚³ãƒŸãƒƒãƒˆ
echo "# AI Tourism PoC" > README.md
git add .
git commit -m "Initial commit"
git push -u origin main
```

### 3.3 GitHub Secretsè¨­å®š

```bash
# GitHub CLI ã§Secretsè¨­å®š
gh secret set AWS_ACCESS_KEY_ID --body "your-access-key"
gh secret set AWS_SECRET_ACCESS_KEY --body "your-secret-key"
gh secret set GOOGLE_GEMINI_API_KEY --body "your-gemini-key"
gh secret set STRIPE_SECRET_KEY --body "your-stripe-key"
```

---

## ğŸ—ï¸ Phase 4: ã‚µãƒ¼ãƒãƒ¬ã‚¹åŸºç›¤æ§‹ç¯‰

**ãªãœã“ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒå¿…è¦ãªã®ã‹ï¼Ÿ**
Serverless Frameworkã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ä¸€å…ƒåŒ–ã§ãã¾ã™ã€‚Lambdaé–¢æ•°ã«ã‚ˆã‚‹ç”»åƒè§£æã€èªè¨¼ã€æ±ºæ¸ˆå‡¦ç†ã®å®Ÿè£…ã«ã‚ˆã‚Šã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ã‚³ã‚¹ãƒˆåŠ¹ç‡ã®è‰¯ã„ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚DynamoDBã¨ã®é€£æºã«ã‚ˆã‚Šã€é«˜æ€§èƒ½ãªNoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### ğŸ§ª Phase 4 ãƒ†ã‚¹ãƒˆè¨ˆç”»

#### **Serverless Framework ãƒ†ã‚¹ãƒˆ**
```bash
# Serverless CLIå‹•ä½œç¢ºèª
serverless --version
serverless config credentials --provider aws --profile ai-tourism-poc

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
serverless print --stage dev           # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹æ–‡ç¢ºèª
serverless package --stage dev         # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ç¢ºèªï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤å‰ï¼‰
```

#### **Lambdaé–¢æ•°å˜ä½“ãƒ†ã‚¹ãƒˆ**
```python
# backend/tests/unit/test_image_analysis.py
import pytest
import json
from unittest.mock import patch, MagicMock
from functions.image_analysis.handler import main

def test_image_analysis_success():
    # ãƒ¢ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
    event = {
        'httpMethod': 'POST',
        'body': json.dumps({
            'image_base64': 'test_image_data',
            'language': 'ja'
        }),
        'headers': {'Authorization': 'Bearer test-token'}
    }
    
    with patch('functions.image_analysis.handler.call_gemini_api') as mock_gemini:
        mock_gemini.return_value = {'location': 'æ±äº¬ã‚¿ãƒ¯ãƒ¼', 'description': 'ãƒ†ã‚¹ãƒˆèª¬æ˜'}
        
        response = main(event, {})
        
        assert response['statusCode'] == 200
        assert 'æ±äº¬ã‚¿ãƒ¯ãƒ¼' in response['body']

def test_image_analysis_invalid_input():
    event = {'httpMethod': 'POST', 'body': '{}'}
    response = main(event, {})
    assert response['statusCode'] == 400
```

#### **API Gatewayçµ±åˆãƒ†ã‚¹ãƒˆ**
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®API ãƒ†ã‚¹ãƒˆ
serverless offline start --stage dev &

# API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
curl -X POST http://localhost:3000/dev/analyze \
  -H "Content-Type: application/json" \
  -d '{"image_base64":"test","language":"ja"}'

# èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ  
curl -X POST http://localhost:3000/dev/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"testpass"}'
```

#### **DynamoDBçµ±åˆãƒ†ã‚¹ãƒˆ**
```python
# backend/tests/integration/test_dynamodb.py
import boto3
import pytest
from moto import mock_dynamodb

@mock_dynamodb
def test_dynamodb_operations():
    # DynamoDB Localæ¥ç¶š
    dynamodb = boto3.resource('dynamodb', 
                            endpoint_url='http://localhost:8000',
                            region_name='ap-northeast-1')
    
    # ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ»æ“ä½œãƒ†ã‚¹ãƒˆ
    table = dynamodb.create_table(TableName='test-users', ...)
    
    # CRUDæ“ä½œãƒ†ã‚¹ãƒˆ
    response = table.put_item(Item={'userId': 'test-user'})
    assert response['ResponseMetadata']['HTTPStatusCode'] == 200
```

### 4.1 Serverless Frameworkè¨­å®š

```yaml
# backend/serverless.yml
service: ai-tourism-poc

frameworkVersion: '3'

provider:
  name: aws
  runtime: python3.11
  region: ap-northeast-1
  stage: ${opt:stage, 'dev'}
  environment:
    STAGE: ${self:provider.stage}
    GOOGLE_GEMINI_API_KEY: ${env:GOOGLE_GEMINI_API_KEY}
    STRIPE_SECRET_KEY: ${env:STRIPE_SECRET_KEY}

functions:
  auth:
    handler: functions/auth/handler.main
    events:
      - http:
          path: auth/{proxy+}
          method: ANY
          cors: true

  imageAnalysis:
    handler: functions/image-analysis/handler.main
    timeout: 15
    memorySize: 512
    reservedConcurrency: 5
    events:
      - http:
          path: analyze
          method: POST
          cors: true

  payment:
    handler: functions/payment/handler.main
    events:
      - http:
          path: payment/{proxy+}
          method: ANY
          cors: true

resources:
  Resources:
    UsersTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: ${self:service}-users-${self:provider.stage}
        BillingMode: PAY_PER_REQUEST
        AttributeDefinitions:
          - AttributeName: userId
            AttributeType: S
        KeySchema:
          - AttributeName: userId
            KeyType: HASH

plugins:
  - serverless-python-requirements
  - serverless-offline
```

### 4.2 Lambdaé–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```python
# backend/functions/image-analysis/handler.py
import json
import boto3
import requests
import os
from decimal import Decimal

def main(event, context):
    try:
        # CORS headers
        headers = {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Headers': 'Content-Type,Authorization',
            'Access-Control-Allow-Methods': 'GET,POST,OPTIONS'
        }
        
        if event['httpMethod'] == 'OPTIONS':
            return {'statusCode': 200, 'headers': headers, 'body': ''}
        
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆè§£æ
        body = json.loads(event['body'])
        image_data = body.get('image')
        language = body.get('language', 'en')
        
        # Google Gemini APIå‘¼ã³å‡ºã—
        result = analyze_image_with_gemini(image_data, language)
        
        # DynamoDBè¨˜éŒ²
        save_analysis_log(event, result)
        
        return {
            'statusCode': 200,
            'headers': headers,
            'body': json.dumps(result)
        }
        
    except Exception as e:
        return {
            'statusCode': 500,
            'headers': headers,
            'body': json.dumps({'error': str(e)})
        }

def analyze_image_with_gemini(image_data, language):
    # Gemini APIå®Ÿè£…
    pass

def save_analysis_log(event, result):
    # DynamoDBä¿å­˜å®Ÿè£…
    pass
```

---

## ğŸ§ª Phase 5: ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**ãªãœã“ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒå¿…è¦ãªã®ã‹ï¼Ÿ**
å“è³ªä¿è¨¼ã¨ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿç¾ã®ãŸã‚ã€åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãŒä¸å¯æ¬ ã§ã™ã€‚ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€çµ±åˆãƒ†ã‚¹ãƒˆã€E2Eãƒ†ã‚¹ãƒˆã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ã®é˜²æ­¢ã¨æ©Ÿèƒ½ã®ä¿¡é ¼æ€§ç¢ºä¿ã‚’å®Ÿç¾ã—ã¾ã™ã€‚motoç­‰ã®ãƒ¢ãƒƒã‚­ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚Šã€AWSã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’åŠ¹ç‡çš„ã«ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

### ğŸ§ª Phase 5 ãƒ†ã‚¹ãƒˆè¨ˆç”»

#### **ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
```bash
# ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g jest @testing-library/react @testing-library/jest-dom
pip install pytest pytest-cov moto requests-mock

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç¢ºèª
cd frontend && npm test -- --watchAll=false
cd ../backend && python -m pytest tests/ -v
```

#### **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæˆ¦ç•¥**
```python
# backend/tests/unit/ æ§‹æˆ
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_image_analysis.py    # ç”»åƒè§£æãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ test_auth_handler.py      # èªè¨¼å‡¦ç†
â”‚   â”œâ”€â”€ test_payment_handler.py   # æ±ºæ¸ˆå‡¦ç†
â”‚   â””â”€â”€ test_utils.py            # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_api_endpoints.py    # API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ test_dynamodb_ops.py     # DynamoDBæ“ä½œ
â”‚   â””â”€â”€ test_s3_operations.py    # S3æ“ä½œ
â””â”€â”€ e2e/
    â”œâ”€â”€ test_user_journey.py     # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼
    â””â”€â”€ test_payment_flow.py     # æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼
```

#### **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**
```typescript
// frontend/src/tests/ æ§‹æˆ
src/tests/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ImageUpload.test.tsx     # ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ AnalysisResult.test.tsx  # è§£æçµæœè¡¨ç¤º
â”‚   â””â”€â”€ UserDashboard.test.tsx   # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ HomePage.test.tsx        # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ LoginPage.test.tsx       # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api.test.ts             # APIé€šä¿¡
â”‚   â””â”€â”€ auth.test.ts            # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹
â””â”€â”€ utils/
    â”œâ”€â”€ imageUtils.test.ts      # ç”»åƒå‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    â””â”€â”€ i18n.test.ts           # å›½éš›åŒ–æ©Ÿèƒ½
```

#### **E2Eãƒ†ã‚¹ãƒˆè¨ˆç”»**
```python
# backend/tests/e2e/test_complete_flow.py
import requests
import pytest

def test_complete_user_journey():
    """å®Œå…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒ†ã‚¹ãƒˆ"""
    base_url = "https://api-dev.photoguidetravel.com"
    
    # 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
    register_response = requests.post(f"{base_url}/v1/auth/register", json={
        "email": "test@example.com",
        "password": "TestPass123!"
    })
    assert register_response.status_code == 201
    
    # 2. ãƒ­ã‚°ã‚¤ãƒ³
    login_response = requests.post(f"{base_url}/v1/auth/login", json={
        "email": "test@example.com",
        "password": "TestPass123!"
    })
    assert login_response.status_code == 200
    token = login_response.json()["token"]
    
    # 3. ç”»åƒè§£æ
    headers = {"Authorization": f"Bearer {token}"}
    analyze_response = requests.post(f"{base_url}/v1/analyze/image", 
        headers=headers,
        json={"image_base64": "test_image_data", "language": "ja"}
    )
    assert analyze_response.status_code == 200
    
    # 4. å±¥æ­´ç¢ºèª
    history_response = requests.get(f"{base_url}/v1/analyze/history", headers=headers)
    assert history_response.status_code == 200
    assert len(history_response.json()) > 0
```

#### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
- Lambdaå†·å´é–‹å§‹æ™‚é–“æ¸¬å®š
- ç”»åƒè§£æå‡¦ç†æ™‚é–“æ¸¬å®š
- API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“æ¸¬å®š
- åŒæ™‚æ¥ç¶šæ•°è² è·ãƒ†ã‚¹ãƒˆ

### 5.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

```python
# backend/tests/test_image_analysis.py
import pytest
import json
from moto import mock_dynamodb
from functions.image_analysis.handler import main

@mock_dynamodb
def test_image_analysis_success():
    # ãƒ†ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
    event = {
        'httpMethod': 'POST',
        'body': json.dumps({
            'image': 'base64_encoded_image',
            'language': 'en'
        })
    }
    
    # é–¢æ•°å®Ÿè¡Œ
    response = main(event, {})
    
    # ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
    assert response['statusCode'] == 200
    body = json.loads(response['body'])
    assert 'translation' in body
    assert 'explanation' in body

# backend/tests/requirements.txt
pytest==7.4.0
moto==4.2.0
boto3==1.26.0
```

### 5.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

```typescript
// frontend/src/tests/ImageUpload.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import ImageUpload from '../components/ImageUpload';

test('ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½', () => {
  render(<ImageUpload />);
  
  const fileInput = screen.getByLabelText(/ç”»åƒã‚’é¸æŠ/i);
  const file = new File(['dummy'], 'test.png', { type: 'image/png' });
  
  fireEvent.change(fileInput, { target: { files: [file] } });
  
  expect(screen.getByText('test.png')).toBeInTheDocument();
});
```

### 5.3 çµ±åˆãƒ†ã‚¹ãƒˆ

```bash
# backend/tests/integration/test_api.py
import requests
import pytest

@pytest.mark.integration
def test_full_api_flow():
    base_url = "https://your-api-gateway-url.amazonaws.com/dev"
    
    # èªè¨¼ãƒ†ã‚¹ãƒˆ
    auth_response = requests.post(f"{base_url}/auth/login", json={
        "email": "test@example.com",
        "password": "testpass"
    })
    assert auth_response.status_code == 200
    
    # ç”»åƒè§£æãƒ†ã‚¹ãƒˆ
    token = auth_response.json()['token']
    headers = {'Authorization': f'Bearer {token}'}
    
    analysis_response = requests.post(f"{base_url}/analyze", 
        headers=headers,
        json={"image": "base64_image", "language": "en"}
    )
    assert analysis_response.status_code == 200
```

---

## ğŸ’³ Phase 6: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ï¼ˆå€‹äººé–‹ç™ºç‰ˆï¼‰

**å€‹äººé–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼š** ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘ã®è¤‡é›‘ãªCI/CDã¯ä¸è¦ã€‚ã‚·ãƒ³ãƒ—ãƒ«ãªèªè¨¼ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ ã§åç›ŠåŒ–ã‚’å®Ÿç¾ã€‚

### 6.1 Amazon Cognito ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å°å…¥

**å®Ÿè£…æ–¹é‡ï¼š** æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã§èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’å°å…¥

#### Cognito ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ¼ãƒ«è¨­å®š
```bash
# AWS CLI ã§Cognitoãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ¼ãƒ«ä½œæˆ
aws cognito-idp create-user-pool \
  --pool-name "ai-tourism-users" \
  --policies "PasswordPolicy={MinimumLength=8,RequireUppercase=false,RequireLowercase=false,RequireNumbers=true,RequireSymbols=false}" \
  --profile ai-tourism-poc

# ã‚¢ãƒ—ãƒªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ  
aws cognito-idp create-user-pool-client \
  --user-pool-id us-west-2_example \
  --client-name "ai-tourism-web-client" \
  --no-generate-secret
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èªè¨¼å®Ÿè£…
```javascript
// Cognitoèªè¨¼é–¢æ•°ï¼ˆAWS SDK v3ä½¿ç”¨ï¼‰
async function authenticateUser(email, password) {
    const cognitoClient = new CognitoIdentityProviderClient({
        region: 'ap-northeast-1'
    });
    
    const command = new InitiateAuthCommand({
        AuthFlow: 'USER_PASSWORD_AUTH',
        ClientId: 'your-client-id',
        AuthParameters: {
            USERNAME: email,
            PASSWORD: password
        }
    });
    
    try {
        const response = await cognitoClient.send(command);
        return response.AuthenticationResult.AccessToken;
    } catch (error) {
        console.error('Authentication failed:', error);
        throw error;
    }
}
```

### 6.2 è§£æåˆ¶é™ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ 

#### ç„¡æ–™ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¶é™ï¼ˆ5å›ã¾ã§ï¼‰
```python
# backend/functions/shared/usage_checker.py
import boto3
from datetime import datetime, timedelta

def check_analysis_limit(user_id, user_type='free'):
    """è§£æå›æ•°åˆ¶é™ãƒã‚§ãƒƒã‚¯"""
    dynamodb = boto3.resource('dynamodb')
    table = dynamodb.Table('ai-tourism-poc-users-dev')
    
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
    response = table.get_item(Key={'user_id': user_id})
    
    if user_type == 'free':
        # ç„¡æ–™ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šæœˆ5å›ã¾ã§
        today = datetime.now()
        month_start = datetime(today.year, today.month, 1)
        
        # ä»Šæœˆã®è§£æå›æ•°ã‚«ã‚¦ãƒ³ãƒˆ
        analysis_count = count_monthly_analyses(user_id, month_start)
        
        if analysis_count >= 5:
            return {
                'allowed': False,
                'message': 'ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã¯æœˆ5å›ã¾ã§è§£æå¯èƒ½ã§ã™ã€‚æœ‰æ–™ãƒ—ãƒ©ãƒ³ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚',
                'remaining': 0
            }
        
        return {
            'allowed': True,
            'remaining': 5 - analysis_count
        }
    
    elif user_type == 'premium_7days':
        # 7æ—¥é–“ãƒ—ãƒ©ãƒ³ï¼šä½¿ã„æ”¾é¡Œï¼ˆæœŸé–“ãƒã‚§ãƒƒã‚¯ï¼‰
        return check_premium_validity(user_id, 7)
    
    elif user_type == 'premium_20days':
        # 20æ—¥é–“ãƒ—ãƒ©ãƒ³ï¼šä½¿ã„æ”¾é¡Œï¼ˆæœŸé–“ãƒã‚§ãƒƒã‚¯ï¼‰
        return check_premium_validity(user_id, 20)

def count_monthly_analyses(user_id, month_start):
    """æœˆé–“è§£æå›æ•°ã‚«ã‚¦ãƒ³ãƒˆ"""
    dynamodb = boto3.resource('dynamodb')
    images_table = dynamodb.Table('ai-tourism-poc-images-dev')
    
    # ä»Šæœˆã®è§£æå±¥æ­´ã‚’å–å¾—
    response = images_table.scan(
        FilterExpression='user_id = :user_id AND created_at >= :month_start',
        ExpressionAttributeValues={
            ':user_id': user_id,
            ':month_start': month_start.isoformat()
        }
    )
    
    return response['Count']
```

#### Squareæ±ºæ¸ˆçµ±åˆ
```python
# backend/functions/payment/square_handler.py
import squareup
from squareup.models import CreatePaymentRequest, Money

def create_square_payment(user_id, plan_type):
    """Squareæ±ºæ¸ˆä½œæˆ"""
    client = squareup.Client(
        access_token=os.environ.get('SQUARE_ACCESS_TOKEN'),
        environment='sandbox'  # æœ¬ç•ªæ™‚ã¯'production'
    )
    
    plans = {
        'premium_7days': {'amount': 980, 'description': '7æ—¥é–“ãƒ—ãƒ¬ãƒŸã‚¢ãƒ '},
        'premium_20days': {'amount': 1980, 'description': '20æ—¥é–“ãƒ—ãƒ¬ãƒŸã‚¢ãƒ '}
    }
    
    plan_info = plans.get(plan_type)
    if not plan_info:
        raise ValueError('Invalid plan type')
    
    payments_api = client.payments
    
    money = Money(
        amount=plan_info['amount'],
        currency='JPY'
    )
    
    request = CreatePaymentRequest(
        source_id='CARD_NONCE_FROM_FRONTEND',  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰é€ä¿¡
        amount_money=money,
        order_id=f"ai-tourism-{user_id}-{int(time.time())}",
        note=plan_info['description']
    )
    
    try:
        result = payments_api.create_payment(body={'payment': request})
        if result.is_success():
            # æ±ºæ¸ˆæˆåŠŸæ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±æ›´æ–°
            update_user_subscription(user_id, plan_type)
            return result.body['payment']
        else:
            raise Exception(result.errors)
    except Exception as e:
        print(f"Square payment error: {e}")
        raise

def update_user_subscription(user_id, plan_type):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ‰æ–™ãƒ—ãƒ©ãƒ³è¨­å®šæ›´æ–°"""
    dynamodb = boto3.resource('dynamodb')
    table = dynamodb.Table('ai-tourism-poc-users-dev')
    
    plan_days = {'premium_7days': 7, 'premium_20days': 20}
    expiry_date = datetime.now() + timedelta(days=plan_days[plan_type])
    
    table.update_item(
        Key={'user_id': user_id},
        UpdateExpression='SET user_type = :type, premium_expiry = :expiry, updated_at = :updated',
        ExpressionAttributeValues={
            ':type': plan_type,
            ':expiry': expiry_date.isoformat(),
            ':updated': datetime.now().isoformat()
        }
    )
```

### 6.3 ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¹ã‚¿è¨­è¨ˆ

#### DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ
```yaml
# serverless.yml ã«è¿½åŠ 
resources:
  Resources:
    UsersTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: ${self:service}-users-${self:provider.stage}
        BillingMode: PAY_PER_REQUEST
        AttributeDefinitions:
          - AttributeName: user_id
            AttributeType: S
        KeySchema:
          - AttributeName: user_id
            KeyType: HASH
        
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
    UserDataStructure:
      user_id: String        # Cognito User ID
      email: String          # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
      user_type: String      # 'free', 'premium_7days', 'premium_20days'
      premium_expiry: String # æœ‰æ–™ãƒ—ãƒ©ãƒ³æœŸé™ï¼ˆISO8601ï¼‰
      monthly_analysis_count: Number  # æœˆé–“è§£æå›æ•°
      total_analysis_count: Number    # ç´¯è¨ˆè§£æå›æ•°
      created_at: String     # ç™»éŒ²æ—¥æ™‚
      updated_at: String     # æ›´æ–°æ—¥æ™‚
```

### 6.4 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èª²é‡‘UI

#### åˆ¶é™åˆ°é”æ™‚ã®Squareæ±ºæ¸ˆç”»é¢
```html
<!-- åˆ¶é™åˆ°é”æ™‚ã®ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="paymentModal" class="payment-modal">
    <div class="payment-content">
        <h2>ğŸš€ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã§ä½¿ã„æ”¾é¡Œï¼</h2>
        
        <div class="plans">
            <div class="plan premium-7days">
                <h3>7æ—¥é–“ãƒ—ãƒ©ãƒ³</h3>
                <p class="price">Â¥980</p>
                <p>è§£æå›æ•°ç„¡åˆ¶é™</p>
                <button onclick="selectPlan('premium_7days')">é¸æŠ</button>
            </div>
            
            <div class="plan premium-20days">
                <h3>20æ—¥é–“ãƒ—ãƒ©ãƒ³</h3>
                <p class="price">Â¥1,980</p>
                <p>è§£æå›æ•°ç„¡åˆ¶é™</p>
                <p class="popular">äººæ°—ãƒ—ãƒ©ãƒ³</p>
                <button onclick="selectPlan('premium_20days')">é¸æŠ</button>
            </div>
        </div>
        
        <div id="square-payment-form"></div>
    </div>
</div>

<script>
// Square Web SDKçµ±åˆ
async function initializeSquarePayment(planType) {
    const payments = Square.payments(applicationId, locationId);
    const card = await payments.card();
    await card.attach('#square-payment-form');
    
    document.getElementById('pay-button').addEventListener('click', async () => {
        const result = await card.tokenize();
        if (result.status === 'OK') {
            await processPayment(result.token, planType);
        }
    });
}

async function processPayment(token, planType) {
    const response = await fetch('/dev/payment/square', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            nonce: token,
            plan_type: planType,
            user_id: getCurrentUserId()
        })
    });
    
    if (response.ok) {
        alert('æ±ºæ¸ˆå®Œäº†ï¼ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚');
        location.reload();
    }
}
</script>
```

---

## ğŸ“Š Phase 7: ã‚·ãƒ³ãƒ—ãƒ«ç›£è¦–è¨­å®šï¼ˆå€‹äººé–‹ç™ºç‰ˆï¼‰

**å€‹äººé–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼š** è¤‡é›‘ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¯ä¸è¦ã€‚åŸºæœ¬çš„ãªCloudWatchã‚¢ãƒ©ãƒ¼ãƒˆã¨ã‚³ã‚¹ãƒˆç®¡ç†ã«é›†ä¸­ã€‚

### 7.1 ã‚³ã‚¹ãƒˆä¸Šé™ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

#### AWS Budgetsã§ã‚³ã‚¹ãƒˆç›£è¦–
```bash
# æœˆé¡$10ä¸Šé™ã®ãƒã‚¸ã‚§ãƒƒãƒˆä½œæˆ
aws budgets create-budget \
  --account-id $(aws sts get-caller-identity --query Account --output text) \
  --budget '{
    "BudgetName": "ai-tourism-monthly-budget",
    "BudgetLimit": {
      "Amount": "10.0",
      "Unit": "USD"
    },
    "TimeUnit": "MONTHLY",
    "BudgetType": "COST"
  }' \
  --notifications-with-subscribers '[{
    "Notification": {
      "NotificationType": "ACTUAL",
      "ComparisonOperator": "GREATER_THAN",
      "Threshold": 80
    },
    "Subscribers": [{
      "SubscriptionType": "EMAIL",
      "Address": "your-email@example.com"
    }]
  }]'
```

### 7.2 åŸºæœ¬ã‚¨ãƒ©ãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆ

#### Lambda ã‚¨ãƒ©ãƒ¼ç‡ã‚¢ãƒ©ãƒ¼ãƒˆ
```bash
# Lambdaé–¢æ•°ã®ã‚¨ãƒ©ãƒ¼ç‡ç›£è¦–
aws cloudwatch put-metric-alarm \
  --alarm-name "ai-tourism-lambda-errors" \
  --alarm-description "High error rate in Lambda functions" \
  --metric-name "Errors" \
  --namespace "AWS/Lambda" \
  --statistic "Sum" \
  --period 300 \
  --evaluation-periods 2 \
  --threshold 5 \
  --comparison-operator "GreaterThanThreshold" \
  --alarm-actions "arn:aws:sns:ap-northeast-1:123456789012:alerts"
```

### 7.3 ã‚·ãƒ³ãƒ—ãƒ«ãƒ­ã‚°ç®¡ç†

#### ä¸è¦ãƒ­ã‚°ã®è‡ªå‹•å‰Šé™¤
```python
# backend/functions/shared/simple_logging.py
import logging
import os

# æœ¬ç•ªç’°å¢ƒã§ã¯æœ€å°é™ã®ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
LOG_LEVEL = os.environ.get('LOG_LEVEL', 'ERROR')

logging.basicConfig(
    level=getattr(logging, LOG_LEVEL),
    format='%(asctime)s - %(levelname)s - %(message)s'
)

def log_error(message, error=None):
    """ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ã¿è¨˜éŒ²ï¼ˆã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼‰"""
    if error:
        logging.error(f"{message}: {str(error)}")
    else:
        logging.error(message)

def log_business_metric(metric_name, value):
    """é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã¿è¨˜éŒ²"""
    if metric_name in ['payment_success', 'analysis_completed', 'user_registered']:
        logging.info(f"METRIC:{metric_name}:{value}")
```

---

## ğŸ¯ å€‹äººé–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ãƒ¡ãƒªãƒƒãƒˆ

### Phase 6ãƒ»7 ç°¡ç´ åŒ–ã«ã‚ˆã‚‹åŠ¹æœ

#### **é–‹ç™ºé€Ÿåº¦å‘ä¸Š**
```yaml
å¾“æ¥ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºï¼‰:
  - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰: 2-3é€±é–“
  - åŒ…æ‹¬çš„ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ : 1-2é€±é–“
  - è¤‡é›‘ãªãƒ†ã‚¹ãƒˆä½“åˆ¶: 1-2é€±é–“
  åˆè¨ˆ: 4-7é€±é–“

å€‹äººé–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:
  - èªè¨¼ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ : 1é€±é–“
  - åŸºæœ¬ç›£è¦–è¨­å®š: 1-2æ—¥
  - ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ­ã‚°ç®¡ç†: 1æ—¥
  åˆè¨ˆ: 1-2é€±é–“
```

#### **é‹ç”¨ã‚³ã‚¹ãƒˆå‰Šæ¸›**
```yaml
è¤‡é›‘ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ : $20-50/æœˆ
ã‚·ãƒ³ãƒ—ãƒ«ç›£è¦–: $0-5/æœˆ

åŒ…æ‹¬çš„ãƒ­ã‚°åé›†: $10-30/æœˆ  
ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ã¿: $0-2/æœˆ

åˆè¨ˆç¯€ç´„: $25-75/æœˆ
```

#### **åç›ŠåŒ–ã®æ—©æœŸå®Ÿç¾**
- è§£æ5å›ç„¡æ–™ â†’ æœ‰æ–™ãƒ—ãƒ©ãƒ³èª˜å°
- 7æ—¥é–“ãƒ—ãƒ©ãƒ³ Â¥980
- 20æ—¥é–“ãƒ—ãƒ©ãƒ³ Â¥1,980
- **æœˆåç›®æ¨™**: Â¥50,000-100,000

---

#### **ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆãƒ†ã‚¹ãƒˆ**
```bash
# ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡ãƒ†ã‚¹ãƒˆ
curl http://localhost:3000                    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç¢ºèª
curl http://localhost:8000/health             # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8001                    # DynamoDB Adminç”»é¢

# API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
curl -X POST http://localhost:8000/dev/analyze \
  -H "Content-Type: application/json" \
  -d '{"image_base64":"test","language":"ja"}'
```

#### **DynamoDB Local ãƒ†ã‚¹ãƒˆ**
```python
# backend/tests/local/test_dynamodb_local.py
import boto3
import pytest

def test_dynamodb_local_connection():
    """DynamoDB Localæ¥ç¶šãƒ†ã‚¹ãƒˆ"""
    dynamodb = boto3.resource('dynamodb',
                            endpoint_url='http://localhost:8000',
                            region_name='ap-northeast-1')
    
    # ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§å–å¾—
    tables = list(dynamodb.tables.all())
    print(f"Available tables: {[table.name for table in tables]}")
    
    # ãƒ†ã‚¹ãƒˆç”¨ãƒ†ãƒ¼ãƒ–ãƒ«æ“ä½œ
    table = dynamodb.Table('ai-tourism-poc-users-local')
    response = table.scan()
    assert 'Items' in response
```

#### **ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ**
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ç¢ºèª
echo "console.log('test change');" >> frontend/src/App.js
# â†’ ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•æ›´æ–°ç¢ºèª

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ç¢ºèªï¼ˆserverless-offlineï¼‰
echo "print('debug message')" >> backend/functions/image-analysis/handler.py
# â†’ APIå†èµ·å‹•ãƒ»åæ˜ ç¢ºèª
```

#### **é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ**
- ã‚³ãƒ¼ãƒ‰å¤‰æ›´ â†’ è‡ªå‹•å†èµ·å‹•ç¢ºèª
- ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚¬å‹•ä½œç¢ºèª
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### 8.1 Dockeré–‹ç™ºç’°å¢ƒ

```dockerfile
# Dockerfile.dev
FROM node:18-alpine

WORKDIR /app

# DynamoDB Local
RUN npm install -g dynamodb-admin

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 3000 8001

CMD ["npm", "run", "dev"]
```

### 8.2 Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - REACT_APP_API_URL=http://localhost:3001

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    ports:
      - "3001:3001"
    volumes:
      - ./backend:/app
    environment:
      - DYNAMODB_ENDPOINT=http://dynamodb:8000
      - AWS_ACCESS_KEY_ID=test
      - AWS_SECRET_ACCESS_KEY=test

  dynamodb:
    image: amazon/dynamodb-local:latest
    ports:
      - "8000:8000"
    command: ["-jar", "DynamoDBLocal.jar", "-inMemory", "-sharedDb"]

  dynamodb-admin:
    image: aaronshaf/dynamodb-admin:latest
    ports:
      - "8001:8001"
    environment:
      - DYNAMO_ENDPOINT=http://dynamodb:8000
    depends_on:
      - dynamodb
```

### 8.3 ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# scripts/dev-setup.sh

echo "ğŸš€ Setting up local development environment..."

# DynamoDB Localèµ·å‹•
docker-compose up -d dynamodb dynamodb-admin

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
cd backend
serverless offline start --stage local &
BACKEND_PID=$!

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
cd ../frontend
npm start &
FRONTEND_PID=$!

echo "âœ… Development environment ready!"
echo "Frontend: http://localhost:3000"
echo "Backend: http://localhost:3001"
echo "DynamoDB Admin: http://localhost:8001"

# Ctrl+C ã§å…¨ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†
trap "kill $BACKEND_PID $FRONTEND_PID; docker-compose down" INT
wait
```

---

## â³ Phase 8ä»¥é™: å°†æ¥æ‹¡å¼µï¼ˆä¿ç•™ï¼‰

**å€‹äººé–‹ç™ºãƒ•ã‚©ãƒ¼ã‚«ã‚¹**: Phase 6ãƒ»7ã®èªè¨¼ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ã‚’å„ªå…ˆã€‚ä»¥ä¸‹ã¯åç›Šå®‰å®šå¾Œã®æ‹¡å¼µé …ç›®ã¨ã—ã¦ä¿ç•™ã€‚

### ğŸ”„ Phase 8: CI/CDè‡ªå‹•åŒ–ï¼ˆä¿ç•™ï¼‰
**å®Ÿè£…æ™‚æœŸ**: æœˆåÂ¥100,000é”æˆå¾Œ
- GitHub Actionsè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
- è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- å“è³ªã‚²ãƒ¼ãƒˆè¨­å®š

### ğŸ³ Phase 9: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒï¼ˆä¿ç•™ï¼‰  
**å®Ÿè£…æ™‚æœŸ**: ãƒãƒ¼ãƒ æ‹¡å¤§æ™‚
- Docker Composeç’°å¢ƒ
- DynamoDB Local
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰è¨­å®š

### ğŸ“Š Phase 10: é«˜åº¦ãªç›£è¦–ï¼ˆä¿ç•™ï¼‰
**å®Ÿè£…æ™‚æœŸ**: æœˆåÂ¥200,000é”æˆå¾Œ
- ã‚«ã‚¹ã‚¿ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- è©³ç´°ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

### ğŸ”’ Phase 11: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ï¼ˆä¿ç•™ï¼‰
**å®Ÿè£…æ™‚æœŸ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼1000äººé”æˆå¾Œ
- WAFå°å…¥
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
- è„†å¼±æ€§è‡ªå‹•æ¤œå‡º

---

## ğŸ¯ å€‹äººé–‹ç™ºå„ªå…ˆåº¦

### **æœ€å„ªå…ˆ Phase 6-7ï¼ˆä»Šã™ãå®Ÿè£…ï¼‰**
```yaml
å„ªå…ˆåº¦: ğŸ”¥ğŸ”¥ğŸ”¥ CRITICAL
æœŸé–“: 2é€±é–“
ROI: å³åº§ã«åç›ŠåŒ–é–‹å§‹
```

### **Phase 8ä»¥é™ï¼ˆåç›Šå®‰å®šå¾Œï¼‰**  
```yaml
å„ªå…ˆåº¦: ğŸ”¥ LOW
æœŸé–“: åç›ŠÂ¥100,000/æœˆé”æˆå¾Œ
ç†ç”±: è¤‡é›‘æ€§ > ãƒ¡ãƒªãƒƒãƒˆ ï¼ˆå€‹äººé–‹ç™ºæ™‚ï¼‰
```

## ğŸš€ å€‹äººé–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆç°¡ç´ ç‰ˆï¼‰

### Phase 6 å®Ÿè£…è¨ˆç”»ï¼ˆ1-2é€±é–“ï¼‰

**Week 1: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **
```bash
# Day 1-2: Cognitoè¨­å®š
aws cognito-idp create-user-pool --pool-name "ai-tourism-users"

# Day 3-4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èªè¨¼å®Ÿè£…
npm install @aws-sdk/client-cognito-identity-provider

# Day 5-7: ä½¿ç”¨å›æ•°åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
```

**Week 2: èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ **
```bash  
# Day 1-3: Square SDKçµ±åˆ
npm install squareup

# Day 4-5: ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ç”»é¢å®Ÿè£…
# Day 6-7: æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ãƒ»ãƒ†ã‚¹ãƒˆ
```

### Phase 7 å®Ÿè£…è¨ˆç”»ï¼ˆ1-2æ—¥ï¼‰

**Day 1: ã‚³ã‚¹ãƒˆç›£è¦–**
```bash
# AWS Budgetsè¨­å®šï¼ˆ30åˆ†ï¼‰
aws budgets create-budget --budget file://budget.json

# CloudWatchã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆ30åˆ†ï¼‰
aws cloudwatch put-metric-alarm --alarm-name "lambda-errors"
```

### åç›ŠåŒ–ç›®æ¨™

**æœˆ1: åŸºæœ¬åç›Š**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼50äºº Ã— æœˆ5å›åˆ¶é™ â†’ 10äººèª²é‡‘
- 7æ—¥é–“ãƒ—ãƒ©ãƒ³: 6äºº Ã— Â¥980 = Â¥5,880
- 20æ—¥é–“ãƒ—ãƒ©ãƒ³: 4äºº Ã— Â¥1,980 = Â¥7,920
- **æœˆå**: Â¥13,800

**æœˆ3: æˆé•·æœŸ**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼200äºº â†’ 50äººèª²é‡‘  
- **æœˆå**: Â¥55,000

**æœˆ6: å®‰å®šæœŸ**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼500äºº â†’ 120äººèª²é‡‘
- **æœˆå**: Â¥130,000

---

## ğŸ“ ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³ï¼ˆ2025å¹´8æœˆ10æ—¥æ™‚ç‚¹ï¼‰

### **âœ… å®Œäº†æ¸ˆã¿Phase**

#### **Phase 1-5: å®Œå…¨å®Ÿè£…æ¸ˆã¿**
```yaml
Phase 1: MacBooké–‹ç™ºç’°å¢ƒ â†’ âœ… å®Œäº†
Phase 2: AWSç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— â†’ âœ… å®Œäº†  
Phase 3: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ â†’ âœ… å®Œäº†
Phase 4: ã‚µãƒ¼ãƒãƒ¬ã‚¹åŸºç›¤ â†’ âœ… å®Œäº†
Phase 5: å¤šè¨€èªAIç”»åƒè§£æ â†’ âœ… å®Œäº†
```

#### **Phase 5.5: MVPå®Œå…¨ç‰ˆï¼ˆäºˆæƒ³å¤–ã®æ€¥é€Ÿé–‹ç™ºï¼‰**
```yaml
çŠ¶æ…‹: âœ… å®Œäº†ï¼ˆ2025å¹´8æœˆ10æ—¥ï¼‰
å†…å®¹: 
  - 4è¨€èªå®Œå…¨å¯¾å¿œUI (ja/ko/zh/en)
  - äºŒé‡è§£æã‚·ã‚¹ãƒ†ãƒ  (åº—èˆ—è¦³å…‰ + çœ‹æ¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼)
  - S3ç”»åƒä¿å­˜ + DynamoDBçµ±åˆ
  - æœ¬ç•ªç’°å¢ƒç¨¼åƒä¸­
URL: https://ai-tourism-poc-frontend-dev.s3.amazonaws.com/sapporo-mvp.html
```

### **ğŸ”¥ æ¬¡æœŸå®Ÿè£…Phase**

#### **Phase 6: èªè¨¼ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå„ªå…ˆåº¦ï¼šCRITICALï¼‰**
```yaml
çŠ¶æ…‹: ğŸ“‹ è¨ˆç”»æ¸ˆã¿ãƒ»æœªç€æ‰‹
æœŸé–“: 1-2é€±é–“
å†…å®¹:
  - Amazon Cognitoèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
  - æœˆ5å›åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯
  - Squareæ±ºæ¸ˆçµ±åˆï¼ˆÂ¥980/Â¥1,980ãƒ—ãƒ©ãƒ³ï¼‰
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¹ã‚¿è¨­è¨ˆ
```

#### **Phase 7: ã‚·ãƒ³ãƒ—ãƒ«ç›£è¦–ï¼ˆå„ªå…ˆåº¦ï¼šHIGHï¼‰**
```yaml
çŠ¶æ…‹: ğŸ“‹ è¨ˆç”»æ¸ˆã¿ãƒ»æœªç€æ‰‹
æœŸé–“: 1-2æ—¥
å†…å®¹:
  - AWS Budgetsæœˆé¡$10åˆ¶é™
  - LambdaåŸºæœ¬ã‚¨ãƒ©ãƒ¼ã‚¢ãƒ©ãƒ¼ãƒˆ
  - æœ€å°é™ãƒ­ã‚°ç®¡ç†
```

### **â³ ä¿ç•™Phase**

#### **Phase 8ä»¥é™: å°†æ¥æ‹¡å¼µ**
```yaml
çŠ¶æ…‹: ğŸ”’ ä¿ç•™ï¼ˆåç›Šå®‰å®šå¾Œï¼‰
å®Ÿè£…æ™‚æœŸ:
  - Phase 8 (CI/CD): æœˆåÂ¥100,000é”æˆå¾Œ
  - Phase 9 (Docker): ãƒãƒ¼ãƒ æ‹¡å¤§æ™‚
  - Phase 10 (é«˜åº¦ç›£è¦–): æœˆåÂ¥200,000é”æˆå¾Œ
  - Phase 11 (ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£): ãƒ¦ãƒ¼ã‚¶ãƒ¼1000äººé”æˆå¾Œ
```

## ğŸ¯ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### **å³åº§ã«é–‹å§‹ã™ã¹ãä½œæ¥­**
1. **Amazon Cognito ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ¼ãƒ«ä½œæˆ**
2. **5å›åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…**  
3. **Squareæ±ºæ¸ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–‹è¨­**
4. **ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³UIå®Ÿè£…**

### **2é€±é–“å¾Œã®ç›®æ¨™çŠ¶æ…‹**
```yaml
æ©Ÿèƒ½: èªè¨¼ä»˜ããƒ»èª²é‡‘å¯èƒ½ã‚µãƒ¼ãƒ“ã‚¹
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ç„¡æ–™5å› â†’ æœ‰æ–™ãƒ—ãƒ©ãƒ³èª˜å°
åç›Š: æœˆåÂ¥13,800ç›®æ¨™ï¼ˆåˆæœˆï¼‰
é‹ç”¨: åŸºæœ¬ç›£è¦–ãƒ»ã‚³ã‚¹ãƒˆåˆ¶å¾¡
```

---

*MVPé–‹ç™ºæˆ¦ç•¥ã«ã‚ˆã‚Šæƒ³å®šã‚ˆã‚Šæ—©æœŸã«ã‚µãƒ¼ãƒ“ã‚¹å®Œæˆã€‚æ¬¡ã¯åç›ŠåŒ–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ã§äº‹æ¥­åŒ–ï¼*